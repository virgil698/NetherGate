# æ ‡ç­¾ç³»ç»Ÿ

NetherGate æä¾›äº†å®Œæ•´çš„æ ‡ç­¾ç³»ç»Ÿ APIï¼Œæ”¯æŒæŸ¥è¯¢å’Œç®¡ç† Minecraft çš„æ–¹å—ã€ç‰©å“ã€å®ä½“ã€æµä½“ã€æ¸¸æˆäº‹ä»¶å’Œç”Ÿç‰©ç¾¤ç³»æ ‡ç­¾ã€‚

> **å‚è€ƒèµ„æ–™ï¼š** [Minecraft Wiki - æ ‡ç­¾](https://zh.minecraft.wiki/w/æ ‡ç­¾)

---

## ğŸ“‹ **ç›®å½•**

- [ä»€ä¹ˆæ˜¯æ ‡ç­¾ç³»ç»Ÿ](#ä»€ä¹ˆæ˜¯æ ‡ç­¾ç³»ç»Ÿ)
- [æ ‡ç­¾ç±»å‹](#æ ‡ç­¾ç±»å‹)
- [æ ‡ç­¾ JSON æ ¼å¼](#æ ‡ç­¾-json-æ ¼å¼)
- [API æ¥å£](#api-æ¥å£)
- [ä½¿ç”¨ç¤ºä¾‹](#ä½¿ç”¨ç¤ºä¾‹)
- [åœ¨å‘½ä»¤ä¸­ä½¿ç”¨æ ‡ç­¾](#åœ¨å‘½ä»¤ä¸­ä½¿ç”¨æ ‡ç­¾)
- [é¢„å®šä¹‰æ ‡ç­¾å¸¸é‡](#é¢„å®šä¹‰æ ‡ç­¾å¸¸é‡)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

---

## ğŸ·ï¸ **ä»€ä¹ˆæ˜¯æ ‡ç­¾ç³»ç»Ÿ**

**æ ‡ç­¾ï¼ˆTagï¼‰**æ˜¯ Minecraft ä¸­çš„ä¸€ç§æŠ€æœ¯æ€§ JSON æ–‡ä»¶ï¼Œå…è®¸ä½¿ç”¨æ•°æ®åŒ…å°†æ¸¸æˆèµ„æºåˆ†ç»„ã€‚æ ‡ç­¾å­˜å‚¨äºæ•°æ®åŒ…çš„ `data/<å‘½åç©ºé—´>/tags/<æ³¨å†Œå>` ç›®å½•ä¸‹ã€‚

### **æ ¸å¿ƒç‰¹æ€§**

- âœ… å°†ç›¸ä¼¼çš„æ–¹å—ã€ç‰©å“ã€å®ä½“ç­‰åˆ†ç»„ç®¡ç†
- âœ… åœ¨å‘½ä»¤ã€é…æ–¹ã€è¿›åº¦ä¸­ä½¿ç”¨ `#` å‰ç¼€å¼•ç”¨æ ‡ç­¾
- âœ… æ”¯æŒæ ‡ç­¾åµŒå¥—å¼•ç”¨
- âœ… æ•°æ®åŒ…å¯ä»¥æ‰©å±•æˆ–è¦†ç›–åŸç‰ˆæ ‡ç­¾

### **å¸¸è§ç”¨é€”**

- æ£€æŸ¥æ–¹å—æ˜¯å¦å±äºæŸä¸ªæè´¨ç±»å‹ï¼ˆå¦‚é“œæ–¹å—ã€æœ¨è´¨æ–¹å—ï¼‰
- åˆ¤æ–­ç‰©å“æ˜¯å¦å¯ç”¨äºä¿®å¤ç‰¹å®šè£…å¤‡
- ç¡®å®šå®ä½“æ˜¯å¦ç¬¦åˆæŸäº›æ¡ä»¶ï¼ˆå¦‚å¯æ¥å—ç¤¼ç‰©çš„å®ä½“ï¼‰
- åœ¨å‘½ä»¤ä¸­æ‰¹é‡é€‰æ‹©å¤šä¸ªæ–¹å—/ç‰©å“/å®ä½“
- å®šä¹‰åˆæˆé…æ–¹çš„ææ–™èŒƒå›´

---

## ğŸ“ **æ ‡ç­¾ç±»å‹**

NetherGate æ”¯æŒä»¥ä¸‹æ ‡ç­¾ç±»å‹ï¼š

| æ³¨å†Œå | æ³¨å†Œè¡¨ | å­˜å‚¨è·¯å¾„ | ç”¨é€” |
|--------|--------|----------|------|
| **æ–¹å—æ ‡ç­¾** | `minecraft:block` | `data/<å‘½åç©ºé—´>/tags/block/` | æ§åˆ¶æ–¹å—è¡Œä¸ºï¼ˆå¯æŒ–æ˜æ€§ã€å¯æ”€çˆ¬æ€§ç­‰ï¼‰ |
| **ç‰©å“æ ‡ç­¾** | `minecraft:item` | `data/<å‘½åç©ºé—´>/tags/item/` | æ§åˆ¶ç‰©å“è¡Œä¸ºï¼ˆå¯æŸ“è‰²ã€å¯ä¿®å¤ç­‰ï¼‰ |
| **å®ä½“ç±»å‹æ ‡ç­¾** | `minecraft:entity_type` | `data/<å‘½åç©ºé—´>/tags/entity_type/` | æ§åˆ¶å®ä½“è¡Œä¸ºï¼ˆæ˜¯å¦ä¸ºèŠ‚è‚¢ç”Ÿç‰©ç­‰ï¼‰ |
| **æµä½“æ ‡ç­¾** | `minecraft:fluid` | `data/<å‘½åç©ºé—´>/tags/fluid/` | å®šä¹‰æµä½“ç±»å‹ï¼ˆæ°´ã€ç†”å²©ç­‰ï¼‰ |
| **æ¸¸æˆäº‹ä»¶æ ‡ç­¾** | `minecraft:game_event` | `data/<å‘½åç©ºé—´>/tags/game_event/` | å®šä¹‰æ¸¸æˆäº‹ä»¶ç±»å‹ï¼ˆæŒ¯åŠ¨ç­‰ï¼‰ |
| **ç”Ÿç‰©ç¾¤ç³»æ ‡ç­¾** | `minecraft:worldgen/biome` | `data/<å‘½åç©ºé—´>/tags/worldgen/biome/` | ç”¨äºä¸–ç•Œç”Ÿæˆå’Œç»“æ„ç”Ÿæˆ |

---

## ğŸ“„ **æ ‡ç­¾ JSON æ ¼å¼**

### **åŸºæœ¬æ ¼å¼**

```json
{
  "replace": false,
  "values": [
    "minecraft:copper_block",
    "minecraft:exposed_copper",
    "#minecraft:oxidized_copper"
  ]
}
```

### **å­—æ®µè¯´æ˜**

| å­—æ®µ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `replace` | å¸ƒå°”å€¼ | `false` | æ˜¯å¦å®Œå…¨è¦†ç›–ä½ä¼˜å…ˆçº§æ•°æ®åŒ…ä¸­çš„åŒåæ ‡ç­¾ |
| `values` | æ•°ç»„ | `[]` | æ ‡ç­¾åŒ…å«çš„å€¼åˆ—è¡¨ |

### **å€¼æ ¼å¼**

`values` æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ å¯ä»¥æ˜¯ï¼š

1. **èµ„æº ID**ï¼ˆå­—ç¬¦ä¸²ï¼‰
   ```json
   "minecraft:copper_block"
   ```

2. **æ ‡ç­¾å¼•ç”¨**ï¼ˆä»¥ `#` å¼€å¤´ï¼‰
   ```json
   "#minecraft:copper"
   ```

3. **å¸¦é€‰é¡¹çš„å¯¹è±¡**
   ```json
   {
     "id": "minecraft:copper_block",
     "required": false
   }
   ```
   - `required`: è‹¥ä¸º `false`ï¼ŒID ä¸å­˜åœ¨æ—¶ä¸ä¼šæŠ¥é”™

### **ç¤ºä¾‹ï¼šé“œæ–¹å—æ ‡ç­¾**

æ–‡ä»¶è·¯å¾„ï¼š`data/minecraft/tags/block/copper.json`

```json
{
  "replace": false,
  "values": [
    "minecraft:copper_block",
    "minecraft:exposed_copper",
    "minecraft:weathered_copper",
    "minecraft:oxidized_copper",
    "#minecraft:waxed_copper"
  ]
}
```

---

## ğŸ“– **API æ¥å£**

### **ITagApi æ¥å£**

```csharp
namespace NetherGate.API.Data
{
    public interface ITagApi
    {
        // æ–¹å—æ ‡ç­¾
        Task<bool> IsBlockInTagAsync(string blockId, string tag);
        Task<List<string>> GetBlocksInTagAsync(string tag);
        Task<List<string>> GetAllBlockTagsAsync();
        
        // ç‰©å“æ ‡ç­¾
        Task<bool> IsItemInTagAsync(string itemId, string tag);
        Task<List<string>> GetItemsInTagAsync(string tag);
        Task<List<string>> GetAllItemTagsAsync();
        
        // å®ä½“ç±»å‹æ ‡ç­¾
        Task<bool> IsEntityInTagAsync(string entityType, string tag);
        Task<List<string>> GetEntitiesInTagAsync(string tag);
        Task<List<string>> GetAllEntityTagsAsync();
        
        // æµä½“æ ‡ç­¾
        Task<bool> IsFluidInTagAsync(string fluidId, string tag);
        Task<List<string>> GetFluidsInTagAsync(string tag);
        Task<List<string>> GetAllFluidTagsAsync();
        
        // æ¸¸æˆäº‹ä»¶æ ‡ç­¾
        Task<bool> IsGameEventInTagAsync(string eventId, string tag);
        Task<List<string>> GetGameEventsInTagAsync(string tag);
        Task<List<string>> GetAllGameEventTagsAsync();
        
        // ç”Ÿç‰©ç¾¤ç³»æ ‡ç­¾
        Task<bool> IsBiomeInTagAsync(string biomeId, string tag);
        Task<List<string>> GetBiomesInTagAsync(string tag);
        Task<List<string>> GetAllBiomeTagsAsync();
    }
}
```

**æ³¨æ„ï¼š** API ä¸­è°ƒç”¨æ ‡ç­¾æ—¶**æ— éœ€**æ·»åŠ  `#` å‰ç¼€ï¼Œåªåœ¨ Minecraft å‘½ä»¤ä¸­ä½¿ç”¨æ—¶æ‰éœ€è¦ã€‚

---

## ğŸ’¡ **ä½¿ç”¨ç¤ºä¾‹**

### **ç¤ºä¾‹ 1ï¼šæ£€æŸ¥æ–¹å—ç±»å‹**

```csharp
public class BlockCheckerPlugin : IPlugin
{
    private IPluginContext _context = null!;

    public async Task OnEnableAsync(IPluginContext context)
    {
        _context = context;
        
        // æ£€æŸ¥æ–¹å—æ˜¯å¦æ˜¯é“œæ–¹å—
        bool isCopper = await _context.TagApi.IsBlockInTagAsync(
            "minecraft:copper_block", 
            "minecraft:copper"
        );
        
        _context.Logger.Info($"copper_block æ˜¯é“œæ–¹å—: {isCopper}");
    }
}
```

### **ç¤ºä¾‹ 2ï¼šè·å–æ ‡ç­¾ä¸­çš„æ‰€æœ‰æ–¹å—**

```csharp
// è·å–æ‰€æœ‰é“œæ–¹å—
var copperBlocks = await _context.TagApi.GetBlocksInTagAsync("minecraft:copper");

_context.Logger.Info($"æ‰¾åˆ° {copperBlocks.Count} ä¸ªé“œæ–¹å—:");
foreach (var block in copperBlocks)
{
    _context.Logger.Info($"  - {block}");
}
```

### **ç¤ºä¾‹ 3ï¼šæ£€æŸ¥ç‰©å“æ˜¯å¦å¯ä¿®å¤è£…å¤‡**

```csharp
// æ£€æŸ¥ç‰©å“æ˜¯å¦å¯ä»¥ä¿®å¤é“œç›”ç”²
bool canRepair = await _context.TagApi.IsItemInTagAsync(
    "minecraft:copper_ingot",
    "minecraft:repairs_copper_armor"
);

if (canRepair)
{
    _context.Logger.Info("é“œé”­å¯ä»¥ä¿®å¤é“œç›”ç”²");
}
```

### **ç¤ºä¾‹ 4ï¼šé“œæ–¹å—è¿‡æ»¤ç³»ç»Ÿ**

åˆ›å»ºä¸€ä¸ªæ’ä»¶ï¼Œè¿‡æ»¤å’Œå¤„ç†æ‰€æœ‰é“œè´¨æ–¹å—ï¼š

```csharp
public class CopperFilterPlugin : IPlugin
{
    private IPluginContext _context = null!;
    private List<string> _copperBlocks = new();

    public async Task OnEnableAsync(IPluginContext context)
    {
        _context = context;
        
        // åŠ è½½æ‰€æœ‰é“œæ–¹å—
        _copperBlocks = await _context.TagApi.GetBlocksInTagAsync(
            MinecraftTags.Blocks.Copper
        );
        
        _context.Logger.Info($"å·²åŠ è½½ {_copperBlocks.Count} ä¸ªé“œæ–¹å—");
        
        // æ³¨å†Œå‘½ä»¤
        _context.CommandManager.RegisterCommand(new CheckCopperCommand(_context, this));
    }

    public bool IsCopperBlock(string blockId)
    {
        return _copperBlocks.Contains(blockId);
    }
}

public class CheckCopperCommand : ICommand
{
    private readonly IPluginContext _context;
    private readonly CopperFilterPlugin _plugin;

    public string Name => "checkcopper";
    public string Description => "æ£€æŸ¥æ–¹å—æ˜¯å¦ä¸ºé“œæ–¹å—";
    public List<string> Aliases => new() { "cc" };
    public string PluginId => "CopperFilter";
    public string? Permission => null;
    public string Usage => "#checkcopper <æ–¹å—ID>";

    public CheckCopperCommand(IPluginContext context, CopperFilterPlugin plugin)
    {
        _context = context;
        _plugin = plugin;
    }

    public async Task<CommandResult> ExecuteAsync(ICommandSender sender, string[] args)
    {
        if (args.Length < 1)
            return CommandResult.Fail($"ç”¨æ³•: {Usage}");

        var blockId = args[0];
        var isCopper = _plugin.IsCopperBlock(blockId);
        
        sender.SendMessage(isCopper 
            ? $"Â§a{blockId} æ˜¯é“œæ–¹å—" 
            : $"Â§c{blockId} ä¸æ˜¯é“œæ–¹å—");
        
        return CommandResult.Ok();
    }
}
```

---

## ğŸ”– **é¢„å®šä¹‰æ ‡ç­¾å¸¸é‡**

NetherGate æä¾›äº†å¸¸ç”¨çš„ Minecraft 1.21.9 æ ‡ç­¾å¸¸é‡ï¼š

```csharp
using static NetherGate.API.Data.MinecraftTags;

// æ–¹å—æ ‡ç­¾
bool hasChest = await _context.TagApi.IsBlockInTagAsync(
    blockId, 
    Blocks.CopperChests  // "minecraft:copper_chests"
);

// ç‰©å“æ ‡ç­¾
bool isCopperTool = await _context.TagApi.IsItemInTagAsync(
    itemId, 
    Items.CopperToolMaterials  // "minecraft:copper_tool_materials"
);

// å®ä½“æ ‡ç­¾
bool canAccept = await _context.TagApi.IsEntityInTagAsync(
    entityType, 
    EntityTypes.AcceptsIronGolemGift  // "minecraft:accepts_iron_golem_gift"
);
```

### **å¯ç”¨çš„æ ‡ç­¾å¸¸é‡**

#### **æ–¹å—æ ‡ç­¾ (MinecraftTags.Blocks)**

| å¸¸é‡ | å€¼ | è¯´æ˜ |
|------|-----|------|
| `CopperChests` | `minecraft:copper_chests` | é“œç®±å­ |
| `Copper` | `minecraft:copper` | é“œæ–¹å— |
| `CopperGolemStatues` | `minecraft:copper_golem_statues` | é“œå‚€å„¡åƒ |
| `LightningRods` | `minecraft:lightning_rods` | é¿é›·é’ˆ |
| `WoodenShelves` | `minecraft:wooden_shelves` | æœ¨æ¶ |
| `Chains` | `minecraft:chains` | é“¾æ¡ |
| `Lanterns` | `minecraft:lanterns` | ç¯ç¬¼ |
| `Bars` | `minecraft:bars` | æ æ† |

#### **ç‰©å“æ ‡ç­¾ (MinecraftTags.Items)**

| å¸¸é‡ | å€¼ | è¯´æ˜ |
|------|-----|------|
| `CopperToolMaterials` | `minecraft:copper_tool_materials` | é“œè´¨å·¥å…·ææ–™ |
| `RepairsCopperArmor` | `minecraft:repairs_copper_armor` | ä¿®å¤é“œç›”ç”²çš„ç‰©å“ |
| `ShearableFromCopperGolem` | `minecraft:shearable_from_copper_golem` | å¯ä»é“œå‚€å„¡å‰ªå–çš„ç‰©å“ |

#### **å®ä½“æ ‡ç­¾ (MinecraftTags.EntityTypes)**

| å¸¸é‡ | å€¼ | è¯´æ˜ |
|------|-----|------|
| `AcceptsIronGolemGift` | `minecraft:accepts_iron_golem_gift` | æ¥å—é“å‚€å„¡ç¤¼ç‰©çš„å®ä½“ |
| `CandidateForIronGolemGift` | `minecraft:candidate_for_iron_golem_gift` | æœ‰èµ„æ ¼è·å¾—é“å‚€å„¡ç¤¼ç‰©çš„å®ä½“ |
| `CannotBePushedOntoBoats` | `minecraft:cannot_be_pushed_onto_boats` | ä¸ä¼šè¢«æ¨ä¸Šèˆ¹çš„å®ä½“ |

---

## ğŸ® **åœ¨å‘½ä»¤ä¸­ä½¿ç”¨æ ‡ç­¾**

åœ¨ Minecraft å‘½ä»¤ä¸­å¼•ç”¨æ ‡ç­¾æ—¶ï¼Œ**å¿…é¡»**ä»¥ `#` å¼€å¤´ã€‚

### **ç¤ºä¾‹ 1ï¼šä½¿ç”¨æ–¹å—æ ‡ç­¾å¡«å……åŒºåŸŸ**

```mcfunction
# ç”¨ä»»æ„åŸæœ¨å¡«å……åŒºåŸŸ
/fill ~-5 ~ ~-5 ~5 ~5 ~5 #minecraft:logs
```

### **ç¤ºä¾‹ 2ï¼šæ¸…é™¤æŒ‡å®šæ ‡ç­¾çš„ç‰©å“**

```mcfunction
# æ¸…é™¤æ‰€æœ‰ç¾Šæ¯›ç±»ç‰©å“
/clear @a #minecraft:wool
```

### **ç¤ºä¾‹ 3ï¼šé€‰æ‹©å®ä½“ç±»å‹**

```mcfunction
# æ€æ­»æ‰€æœ‰èŠ‚è‚¢ç”Ÿç‰©
/kill @e[type=#minecraft:arthropod]
```

### **é€šè¿‡ NetherGate æ‰§è¡Œå¸¦æ ‡ç­¾çš„å‘½ä»¤**

```csharp
public async Task FillWithCopperBlocks()
{
    // ä½¿ç”¨é“œæ–¹å—æ ‡ç­¾å¡«å……åŒºåŸŸ
    await _context.RconClient!.ExecuteCommandAsync(
        "fill 0 64 0 10 74 10 #minecraft:copper"
    );
}

public async Task ClearCopperItems()
{
    // æ¸…é™¤æ‰€æœ‰ç©å®¶çš„é“œç‰©å“
    await _context.RconClient!.ExecuteCommandAsync(
        "clear @a #minecraft:copper"
    );
}
```

---

## ğŸ”– **é¢„å®šä¹‰æ ‡ç­¾å¸¸é‡**

### **ä½¿ç”¨æ–¹å¼**

```csharp
using static NetherGate.API.Data.MinecraftTags;

// æ–¹å—æ ‡ç­¾
await _context.TagApi.IsBlockInTagAsync(blockId, Blocks.Copper);

// ç‰©å“æ ‡ç­¾
await _context.TagApi.IsItemInTagAsync(itemId, Items.CopperToolMaterials);

// å®ä½“æ ‡ç­¾
await _context.TagApi.IsEntityInTagAsync(entityType, EntityTypes.AcceptsIronGolemGift);

// æµä½“æ ‡ç­¾
await _context.TagApi.IsFluidInTagAsync(fluidId, Fluids.Water);

// ç”Ÿç‰©ç¾¤ç³»æ ‡ç­¾
await _context.TagApi.IsBiomeInTagAsync(biomeId, Biomes.IsOcean);
```

### **å®Œæ•´æ ‡ç­¾åˆ—è¡¨**

#### **æµä½“æ ‡ç­¾ (MinecraftTags.Fluids)**

| å¸¸é‡ | å€¼ | è¯´æ˜ |
|------|-----|------|
| `Water` | `minecraft:water` | æ°´ï¼ˆåŒ…æ‹¬æµåŠ¨æ°´å’Œé™æ­¢æ°´ï¼‰ |
| `Lava` | `minecraft:lava` | ç†”å²©ï¼ˆåŒ…æ‹¬æµåŠ¨ç†”å²©å’Œé™æ­¢ç†”å²©ï¼‰ |

#### **æ¸¸æˆäº‹ä»¶æ ‡ç­¾ (MinecraftTags.GameEvents)**

| å¸¸é‡ | å€¼ | è¯´æ˜ |
|------|-----|------|
| `Vibrations` | `minecraft:vibrations` | æŒ¯åŠ¨äº‹ä»¶ |
| `IgnoreVibrationsSneaking` | `minecraft:ignore_vibrations_sneaking` | æ½œè¡Œæ—¶å¿½ç•¥çš„æŒ¯åŠ¨ |

#### **ç”Ÿç‰©ç¾¤ç³»æ ‡ç­¾ (MinecraftTags.Biomes)**

| å¸¸é‡ | å€¼ | è¯´æ˜ |
|------|-----|------|
| `HasStructureVillage` | `minecraft:has_structure/village` | å¯ç”Ÿæˆæ‘åº„ |
| `HasStructureDesertPyramid` | `minecraft:has_structure/desert_pyramid` | å¯ç”Ÿæˆæ²™æ¼ ç¥æ®¿ |
| `HasStructureWoodlandMansion` | `minecraft:has_structure/woodland_mansion` | å¯ç”Ÿæˆæ—åœ°åºœé‚¸ |
| `HasStructureOceanMonument` | `minecraft:has_structure/ocean_monument` | å¯ç”Ÿæˆæµ·åº•ç¥æ®¿ |
| `HasStructureStronghold` | `minecraft:has_structure/stronghold` | å¯ç”Ÿæˆè¦å¡ |
| `IsNether` | `minecraft:is_nether` | ä¸‹ç•Œç”Ÿç‰©ç¾¤ç³» |
| `IsEnd` | `minecraft:is_end` | æœ«åœ°ç”Ÿç‰©ç¾¤ç³» |
| `IsOverworld` | `minecraft:is_overworld` | ä¸»ä¸–ç•Œç”Ÿç‰©ç¾¤ç³» |
| `IsOcean` | `minecraft:is_ocean` | æµ·æ´‹ç”Ÿç‰©ç¾¤ç³» |
| `IsRiver` | `minecraft:is_river` | æ²³æµç”Ÿç‰©ç¾¤ç³» |
| `IsBeach` | `minecraft:is_beach` | æ²™æ»©ç”Ÿç‰©ç¾¤ç³» |

---

## ğŸ’¡ **é«˜çº§ä½¿ç”¨ç¤ºä¾‹**

### **ç¤ºä¾‹ 5ï¼šç”Ÿç‰©ç¾¤ç³»æ£€æµ‹ç³»ç»Ÿ**

```csharp
public class BiomeDetectorPlugin : IPlugin
{
    private IPluginContext _context = null!;

    public async Task OnEnableAsync(IPluginContext context)
    {
        _context = context;
        
        _context.CommandManager.RegisterCommand(new CheckBiomeCommand(_context));
    }
}

public class CheckBiomeCommand : ICommand
{
    private readonly IPluginContext _context;

    public string Name => "checkbiome";
    public string Description => "æ£€æŸ¥å½“å‰ç”Ÿç‰©ç¾¤ç³»ç±»å‹";
    public string Usage => "#checkbiome";
    public List<string> Aliases => new() { "cb" };
    public string PluginId => "BiomeDetector";
    public string? Permission => null;

    public CheckBiomeCommand(IPluginContext context)
    {
        _context = context;
    }

    public async Task<CommandResult> ExecuteAsync(ICommandSender sender, string[] args)
    {
        // é€šè¿‡ RCON è·å–ç©å®¶å½“å‰ç”Ÿç‰©ç¾¤ç³»
        var result = await _context.RconClient!.ExecuteCommandAsync(
            $"data get entity {sender.Name} Dimension"
        );
        
        // å‡è®¾è·å–åˆ°äº†ç”Ÿç‰©ç¾¤ç³» ID
        string biomeId = "minecraft:plains";  // å®é™…éœ€è¦è§£æå‘½ä»¤ç»“æœ
        
        // æ£€æŸ¥ç”Ÿç‰©ç¾¤ç³»ç±»å‹
        bool isOcean = await _context.TagApi.IsBiomeInTagAsync(biomeId, Biomes.IsOcean);
        bool isNether = await _context.TagApi.IsBiomeInTagAsync(biomeId, Biomes.IsNether);
        bool canVillageSpawn = await _context.TagApi.IsBiomeInTagAsync(biomeId, Biomes.HasStructureVillage);
        
        var message = $"""
            Â§6â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            Â§f  ç”Ÿç‰©ç¾¤ç³»ä¿¡æ¯
            
            Â§7  ID: Â§f{biomeId}
            Â§7  ç±»å‹: Â§f{(isOcean ? "æµ·æ´‹" : isNether ? "ä¸‹ç•Œ" : "ä¸»ä¸–ç•Œ")}
            Â§7  å¯ç”Ÿæˆæ‘åº„: Â§f{(canVillageSpawn ? "æ˜¯" : "å¦")}
            Â§6â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            """;
        
        sender.SendMessage(message);
        return CommandResult.Ok();
    }
}
```

### **ç¤ºä¾‹ 6ï¼šæµä½“æ£€æµ‹æ’ä»¶**

```csharp
public class FluidCheckerPlugin : IPlugin
{
    private IPluginContext _context = null!;

    public async Task OnEnableAsync(IPluginContext context)
    {
        _context = context;
        
        // æ£€æŸ¥æŸä¸ªä½ç½®çš„æµä½“
        await CheckFluidAt(0, 64, 0);
    }

    private async Task CheckFluidAt(int x, int y, int z)
    {
        // å‡è®¾é€šè¿‡æŸç§æ–¹å¼è·å–äº†æµä½“ ID
        string fluidId = "minecraft:water";
        
        // æ£€æŸ¥æ˜¯å¦ä¸ºæ°´
        bool isWater = await _context.TagApi.IsFluidInTagAsync(fluidId, Fluids.Water);
        
        if (isWater)
        {
            _context.Logger.Info($"ä½ç½® ({x}, {y}, {z}) æ˜¯æ°´");
        }
        
        // æ£€æŸ¥æ˜¯å¦ä¸ºç†”å²©
        bool isLava = await _context.TagApi.IsFluidInTagAsync(fluidId, Fluids.Lava);
        
        if (isLava)
        {
            _context.Logger.Info($"ä½ç½® ({x}, {y}, {z}) æ˜¯ç†”å²©");
        }
    }
}
```

### **ç¤ºä¾‹ 7ï¼šæ¸¸æˆäº‹ä»¶ç›‘å¬**

```csharp
public class VibrationMonitorPlugin : IPlugin
{
    private IPluginContext _context = null!;

    public async Task OnEnableAsync(IPluginContext context)
    {
        _context = context;
        
        // è·å–æ‰€æœ‰æŒ¯åŠ¨ç±»å‹çš„æ¸¸æˆäº‹ä»¶
        var vibrations = await _context.TagApi.GetGameEventsInTagAsync(GameEvents.Vibrations);
        
        _context.Logger.Info($"å…±æœ‰ {vibrations.Count} ç§æŒ¯åŠ¨äº‹ä»¶:");
        foreach (var vibration in vibrations)
        {
            _context.Logger.Info($"  - {vibration}");
        }
    }
}
```

---

## âœ… **æœ€ä½³å®è·µ**

### **1. ä½¿ç”¨é¢„å®šä¹‰å¸¸é‡**

ä¼˜å…ˆä½¿ç”¨ `MinecraftTags` ç±»ä¸­çš„å¸¸é‡ï¼Œé¿å…ç¡¬ç¼–ç å­—ç¬¦ä¸²ï¼š

```csharp
// âœ… æ¨è
await _context.TagApi.IsBlockInTagAsync(blockId, Blocks.Copper);

// âŒ ä¸æ¨è
await _context.TagApi.IsBlockInTagAsync(blockId, "minecraft:copper");
```

### **2. API è°ƒç”¨ä¸éœ€è¦ # å‰ç¼€**

```csharp
// âœ… æ­£ç¡®ï¼šAPI è°ƒç”¨
await _context.TagApi.IsBlockInTagAsync("minecraft:copper_block", "minecraft:copper");

// âŒ é”™è¯¯ï¼šä¸è¦æ·»åŠ  # å‰ç¼€
await _context.TagApi.IsBlockInTagAsync("minecraft:copper_block", "#minecraft:copper");

// âœ… æ­£ç¡®ï¼šå‘½ä»¤ä¸­ä½¿ç”¨
await _context.RconClient!.ExecuteCommandAsync("fill ~ ~ ~ ~10 ~10 ~10 #minecraft:copper");
```

### **3. ç¼“å­˜æ ‡ç­¾æ•°æ®**

å¦‚æœéœ€è¦é¢‘ç¹æŸ¥è¯¢ï¼Œå¯ä»¥ç¼“å­˜æ ‡ç­¾æ•°æ®ï¼š

```csharp
public class MyPlugin : IPlugin
{
    private List<string> _copperBlocks = new();
    private DateTime _lastCacheTime;

    public async Task OnEnableAsync(IPluginContext context)
    {
        // å¯åŠ¨æ—¶åŠ è½½ä¸€æ¬¡
        _copperBlocks = await context.TagApi.GetBlocksInTagAsync(Blocks.Copper);
        _lastCacheTime = DateTime.Now;
        
        // åç»­ä½¿ç”¨ç¼“å­˜çš„æ•°æ®
        bool isCopper = _copperBlocks.Contains(blockId);
    }

    private async Task RefreshCacheIfNeeded()
    {
        // ç¼“å­˜ 10 åˆ†é’Ÿååˆ·æ–°
        if ((DateTime.Now - _lastCacheTime).TotalMinutes > 10)
        {
            _copperBlocks = await _context.TagApi.GetBlocksInTagAsync(Blocks.Copper);
            _lastCacheTime = DateTime.Now;
        }
    }
}
```

### **4. å¤„ç†å‘½åç©ºé—´**

æ ‡ç­¾ API ä¼šè‡ªåŠ¨å¤„ç†å‘½åç©ºé—´ï¼Œä»¥ä¸‹ä¸¤ç§å†™æ³•ç­‰æ•ˆï¼š

```csharp
// ä¸¤ç§å†™æ³•éƒ½å¯ä»¥
await _context.TagApi.IsBlockInTagAsync("copper_block", "copper");
await _context.TagApi.IsBlockInTagAsync("minecraft:copper_block", "minecraft:copper");
```

### **5. é”™è¯¯å¤„ç†**

å§‹ç»ˆæ£€æŸ¥è¿”å›ç»“æœï¼š

```csharp
try
{
    var blocks = await _context.TagApi.GetBlocksInTagAsync("custom:my_tag");
    if (blocks.Count == 0)
    {
        _context.Logger.Warning("æ ‡ç­¾ä¸ºç©ºæˆ–ä¸å­˜åœ¨");
    }
}
catch (Exception ex)
{
    _context.Logger.Error("è·å–æ ‡ç­¾å¤±è´¥", ex);
}
```

### **6. æ ‡ç­¾å¼•ç”¨**

åˆ›å»ºè‡ªå®šä¹‰æ ‡ç­¾æ—¶ï¼Œå¯ä»¥å¼•ç”¨å…¶ä»–æ ‡ç­¾ï¼š

```json
{
  "replace": false,
  "values": [
    "minecraft:copper_block",
    "#minecraft:oxidized_copper",
    "#minecraft:waxed_copper"
  ]
}
```

å¯¹åº”çš„ API æŸ¥è¯¢ä¼šè‡ªåŠ¨è§£ææ ‡ç­¾å¼•ç”¨ã€‚

---

## âš™ï¸ **æŠ€æœ¯ç»†èŠ‚**

### **ç¼“å­˜æœºåˆ¶**

- æ ‡ç­¾æ•°æ®ä¼šç¼“å­˜ **10 åˆ†é’Ÿ**
- ä¿®æ”¹æ•°æ®åŒ…åéœ€è¦é‡å¯æœåŠ¡å™¨æˆ–ç­‰å¾…ç¼“å­˜è¿‡æœŸ
- ç¼“å­˜å¯æé«˜æŸ¥è¯¢æ€§èƒ½ï¼Œå‡å°‘æ–‡ä»¶è¯»å–

### **æ–‡ä»¶è§£æ**

æ ‡ç­¾ç³»ç»Ÿä¼šè‡ªåŠ¨è§£ææœåŠ¡å™¨æ•°æ®åŒ…ä¸­çš„æ ‡ç­¾æ–‡ä»¶ï¼š
- æ”¯æŒæ ‡å‡† JSON æ ¼å¼
- æ”¯æŒæ ‡ç­¾å¼•ç”¨ï¼ˆ`#namespace:tag_name`ï¼‰
- è‡ªåŠ¨å¤„ç† `replace` å­—æ®µ

---

## ğŸ“¦ **ä¾èµ–è¦æ±‚**

- âœ… Minecraft Java ç‰ˆ **1.21.9+**
- âœ… NetherGate **1.0.0+**
- âœ… æœåŠ¡å™¨æ•°æ®åŒ…æ­£ç¡®é…ç½®

---

## ğŸ› **å·²çŸ¥é™åˆ¶**

1. **ç¼“å­˜æ—¶é—´**ï¼šæ ‡ç­¾æ•°æ®ç¼“å­˜ 10 åˆ†é’Ÿï¼Œå®æ—¶ä¿®æ”¹æ•°æ®åŒ…ä¸ä¼šç«‹å³ç”Ÿæ•ˆ
2. **æ ‡ç­¾å¼•ç”¨**ï¼šå½“å‰ç‰ˆæœ¬æš‚ä¸æ”¯æŒé€’å½’è§£ææ ‡ç­¾å¼•ç”¨ï¼ˆ`#` å¼€å¤´çš„æ ‡ç­¾ï¼‰
3. **è‡ªå®šä¹‰æ•°æ®åŒ…**ï¼šä»…æ‰«æ `minecraft` å‘½åç©ºé—´çš„æ ‡ç­¾ï¼Œè‡ªå®šä¹‰å‘½åç©ºé—´éœ€è¦æŒ‡å®šå®Œæ•´è·¯å¾„
4. **å‡½æ•°æ ‡ç­¾**ï¼šå½“å‰ç‰ˆæœ¬ä¸æ”¯æŒå‡½æ•°æ ‡ç­¾ï¼ˆ`tick` å’Œ `load` æ ‡ç­¾ï¼‰çš„ç›´æ¥ç®¡ç†

---

## ğŸ“š **æ ‡ç­¾æ–‡ä»¶ç¤ºä¾‹**

### **ç¤ºä¾‹ 1ï¼šè‡ªå®šä¹‰é“œæ–¹å—æ ‡ç­¾**

æ–‡ä»¶è·¯å¾„ï¼š`data/mypack/tags/block/all_copper.json`

```json
{
  "replace": false,
  "values": [
    "#minecraft:copper",
    "minecraft:copper_door",
    "minecraft:copper_trapdoor",
    "minecraft:lightning_rod"
  ]
}
```

### **ç¤ºä¾‹ 2ï¼šè‡ªå®šä¹‰å·¥å…·ææ–™æ ‡ç­¾**

æ–‡ä»¶è·¯å¾„ï¼š`data/mypack/tags/item/advanced_tools.json`

```json
{
  "replace": false,
  "values": [
    "minecraft:diamond_pickaxe",
    "minecraft:netherite_pickaxe",
    {
      "id": "mypack:custom_pickaxe",
      "required": false
    }
  ]
}
```

### **ç¤ºä¾‹ 3ï¼šè¦†ç›–åŸç‰ˆæ ‡ç­¾**

æ–‡ä»¶è·¯å¾„ï¼š`data/minecraft/tags/block/logs.json`

```json
{
  "replace": true,
  "values": [
    "#minecraft:logs_that_burn",
    "minecraft:crimson_stem",
    "minecraft:warped_stem"
  ]
}
```

---

## ğŸ“š **ç›¸å…³æ–‡æ¡£**

- [NBT æ•°æ®æ“ä½œ](./NBTæ•°æ®æ“ä½œ.md)
- [æ–¹å—æ•°æ®æ“ä½œ](./æ–¹å—æ•°æ®æ“ä½œ.md)
- [ç‰©å“ç»„ä»¶ç³»ç»Ÿ](./ç‰©å“ç»„ä»¶ç³»ç»Ÿ.md)

---

**æ–‡æ¡£ç»´æŠ¤è€…ï¼š** NetherGate å¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°ï¼š** 2025-10-09
