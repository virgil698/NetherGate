# NetherGate å‘½ä»¤ç³»ç»Ÿ

NetherGate æä¾›äº†ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”æ˜“äºä½¿ç”¨çš„å‘½ä»¤ç³»ç»Ÿï¼Œæ”¯æŒæ§åˆ¶å°å‘½ä»¤å’Œæ¸¸æˆå†…å‘½ä»¤ï¼Œå¹¶é›†æˆäº†æƒé™æ£€æŸ¥ã€Tab è¡¥å…¨å’Œå‘½ä»¤åˆ«åç­‰åŠŸèƒ½ã€‚

---

## ğŸ“‹ **ç›®å½•**

- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [å‘½ä»¤ç±»å‹](#å‘½ä»¤ç±»å‹)
- [åˆ›å»ºå‘½ä»¤](#åˆ›å»ºå‘½ä»¤)
- [æ³¨å†Œå‘½ä»¤](#æ³¨å†Œå‘½ä»¤)
- [å‘½ä»¤å‰ç¼€](#å‘½ä»¤å‰ç¼€)
- [æƒé™æ£€æŸ¥](#æƒé™æ£€æŸ¥)
- [Tab è¡¥å…¨](#tab-è¡¥å…¨)
- [å‘½ä»¤åˆ«å](#å‘½ä»¤åˆ«å)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

---

## ğŸš€ **å¿«é€Ÿå¼€å§‹**

### **1. åˆ›å»ºç®€å•å‘½ä»¤**

```csharp
using NetherGate.API.Commands;
using NetherGate.API.Plugins;

public class HelloCommand : ICommand
{
    private readonly PluginBase _plugin;
    
    public string Name => "hello";
    public string Description => "å‘ç©å®¶æ‰“æ‹›å‘¼";
    public string Usage => "/hello [name]";
    public string[] Aliases => new[] { "hi", "greet" };
    public string Permission => "myplugin.hello";  // å¯é€‰ï¼Œnull è¡¨ç¤ºæ— éœ€æƒé™
    public string PluginId => _plugin.Metadata.Id;

    public HelloCommand(PluginBase plugin)
    {
        _plugin = plugin;
    }

    public async Task<CommandResult> ExecuteAsync(ICommandSender sender, string[] args)
    {
        if (sender.IsConsole)
        {
            return CommandResult.Ok("ä½ å¥½ï¼æ¥è‡ªæ§åˆ¶å°");
        }
        
        string target = args.Length > 0 ? args[0] : sender.Name;
        await _plugin.GameDisplay.SendChatMessage(sender.Name, $"Â§aä½ å¥½, {target}ï¼");
        
        return CommandResult.Ok($"å‘ {target} æ‰“æ‹›å‘¼æˆåŠŸ");
    }
    
    public async Task<List<string>> TabCompleteAsync(ICommandSender sender, string[] args)
    {
        // ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæç¤ºåœ¨çº¿ç©å®¶
        if (args.Length == 1)
        {
            var players = await _plugin.Server.GetOnlinePlayersAsync();
            return players
                .Select(p => p.Name)
                .Where(name => name.StartsWith(args[0], StringComparison.OrdinalIgnoreCase))
                .ToList();
        }
        return new List<string>();
    }
}
```

### **2. æ³¨å†Œå‘½ä»¤**

```csharp
public class MyPlugin : PluginBase
{
    public override Task OnEnableAsync()
    {
        // æ³¨å†Œå‘½ä»¤
        Commands.RegisterCommand(new HelloCommand(this));
        
        Logger.Info("Hello å‘½ä»¤å·²æ³¨å†Œ");
        return Task.CompletedTask;
    }
}
```

### **3. ä½¿ç”¨å‘½ä»¤**

```bash
# æ§åˆ¶å°æ‰§è¡Œï¼ˆæ— å‰ç¼€ï¼‰
hello

# æ¸¸æˆå†…æ‰§è¡Œï¼ˆä½¿ç”¨ # å‰ç¼€ï¼‰
#hello
#hi        # ä½¿ç”¨åˆ«å
```

---

## ğŸ¯ **å‘½ä»¤ç±»å‹**

### **1. æ§åˆ¶å°å‘½ä»¤**

ä» NetherGate æ§åˆ¶å°æ‰§è¡Œï¼Œ**ä¸éœ€è¦å‰ç¼€**ï¼š

```bash
plugin list
permission reload
stop
```

### **2. æ¸¸æˆå†…å‘½ä»¤**

ä» Minecraft èŠå¤©æ¡†æ‰§è¡Œï¼Œ**ä½¿ç”¨ `#` å‰ç¼€**ï¼ˆé¿å…ä¸åŸç‰ˆå‘½ä»¤å†²çªï¼‰ï¼š

```
#help
#spawn
#tpa Steve
```

### **3. RCON å‘½ä»¤**

é€šè¿‡ RCON å‘é€åˆ° Minecraft æœåŠ¡å™¨çš„åŸç”Ÿå‘½ä»¤ï¼š

```bash
/say Hello
/give Steve diamond 64
/tp Steve 0 64 0
```

**æ³¨æ„ï¼š** NetherGate æ¡†æ¶å‘½ä»¤ä½¿ç”¨ `#` å‰ç¼€ï¼ŒåŸç‰ˆ Minecraft å‘½ä»¤ä½¿ç”¨ `/` å‰ç¼€ã€‚

---

## ğŸ› ï¸ **åˆ›å»ºå‘½ä»¤**

### **ICommand æ¥å£**

```csharp
namespace NetherGate.API.Commands
{
    public interface ICommand
    {
        /// <summary>
        /// å‘½ä»¤åç§°ï¼ˆä¸»è¦åç§°ï¼‰
        /// </summary>
        string Name { get; }
        
        /// <summary>
        /// å‘½ä»¤æè¿°
        /// </summary>
        string Description { get; }
        
        /// <summary>
        /// ä½¿ç”¨æ–¹æ³•æç¤º
        /// </summary>
        string Usage { get; }
        
        /// <summary>
        /// å‘½ä»¤åˆ«ååˆ—è¡¨ï¼ˆå¯é€‰ï¼‰
        /// </summary>
        string[] Aliases { get; }
        
        /// <summary>
        /// æ‰€å±æ’ä»¶ ID
        /// </summary>
        string PluginId { get; }
        
        /// <summary>
        /// æ‰€éœ€æƒé™èŠ‚ç‚¹ï¼ˆnull è¡¨ç¤ºæ— éœ€æƒé™ï¼‰
        /// </summary>
        string? Permission { get; }
        
        /// <summary>
        /// æ‰§è¡Œå‘½ä»¤
        /// </summary>
        /// <param name="sender">å‘½ä»¤å‘é€è€…</param>
        /// <param name="args">å‘½ä»¤å‚æ•°</param>
        Task<CommandResult> ExecuteAsync(ICommandSender sender, string[] args);
        
        /// <summary>
        /// Tab è¡¥å…¨ï¼ˆå¯é€‰å®ç°ï¼‰
        /// </summary>
        /// <param name="sender">å‘½ä»¤å‘é€è€…</param>
        /// <param name="args">å½“å‰è¾“å…¥çš„å‚æ•°</param>
        Task<List<string>> TabCompleteAsync(ICommandSender sender, string[] args);
    }
}
```

### **ICommandSender æ¥å£**

```csharp
namespace NetherGate.API.Commands
{
    public interface ICommandSender
    {
        /// <summary>
        /// å‘é€è€…åç§°
        /// </summary>
        string Name { get; }
        
        /// <summary>
        /// æ˜¯å¦æ˜¯æ§åˆ¶å°
        /// </summary>
        bool IsConsole { get; }
        
        /// <summary>
        /// å‘é€æ¶ˆæ¯ç»™å‘½ä»¤å‘é€è€…
        /// </summary>
        /// <param name="message">æ¶ˆæ¯å†…å®¹</param>
        void SendMessage(string message);
        
        /// <summary>
        /// æ£€æŸ¥æ˜¯å¦æ‹¥æœ‰æŒ‡å®šæƒé™
        /// </summary>
        /// <param name="permission">æƒé™èŠ‚ç‚¹</param>
        /// <returns>æ˜¯å¦æ‹¥æœ‰æƒé™</returns>
        bool HasPermission(string permission);
    }
}
```

### **CommandResult è®°å½•**

```csharp
namespace NetherGate.API.Commands
{
    public record CommandResult
    {
        public bool Success { get; init; }
        public string Message { get; init; }
        
        // é™æ€å·¥å‚æ–¹æ³•
        public static CommandResult Ok(string message) 
            => new CommandResult { Success = true, Message = message };
        
        public static CommandResult Fail(string message) 
            => new CommandResult { Success = false, Message = message };
    }
}
```

### **åŸºæœ¬å‘½ä»¤ç¤ºä¾‹**

```csharp
using NetherGate.API.Commands;
using NetherGate.API.Plugins;

public class SpawnCommand : ICommand
{
    private readonly PluginBase _plugin;
    
    public string Name => "spawn";
    public string Description => "ä¼ é€åˆ°å‡ºç”Ÿç‚¹";
    public string Usage => "#spawn";
    public string[] Aliases => new[] { "s" };
    public string PluginId => _plugin.Metadata.Id;
    public string? Permission => "myplugin.spawn";

    public SpawnCommand(PluginBase plugin)
    {
        _plugin = plugin;
    }

    public async Task<CommandResult> ExecuteAsync(string[] args, ICommandSender? sender = null)
    {
        // åªèƒ½åœ¨æ¸¸æˆå†…ä½¿ç”¨
        if (sender == null)
        {
            return CommandResult.Fail("æ­¤å‘½ä»¤åªèƒ½åœ¨æ¸¸æˆå†…ä½¿ç”¨");
        }
        
        // æ£€æŸ¥æƒé™ï¼ˆå¯é€‰ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨æ£€æŸ¥ï¼‰
        if (!await _context.PermissionManager.HasPermissionAsync(sender.Name, Permission))
        {
            return CommandResult.Fail("Â§cä½ æ²¡æœ‰æƒé™ä½¿ç”¨æ­¤å‘½ä»¤");
        }
        
        // ä¼ é€åˆ°å‡ºç”Ÿç‚¹
        await _context.GameDisplayApi.TeleportPlayer(sender.Name, 0, 64, 0);
        
        return CommandResult.Success("Â§aå·²ä¼ é€åˆ°å‡ºç”Ÿç‚¹");
    }
}
```

### **å¸¦å‚æ•°çš„å‘½ä»¤**

```csharp
public class TeleportCommand : ICommand
{
    private readonly IPluginContext _context;
    
    public string Name => "tp";
    public string Description => "ä¼ é€åˆ°æŒ‡å®šåæ ‡æˆ–ç©å®¶";
    public string[] Aliases => new[] { "teleport" };
    public string? Permission => "myplugin.tp";
    public string? Usage => "#tp <x> <y> <z> æˆ– #tp <ç©å®¶>";

    public TeleportCommand(IPluginContext context)
    {
        _context = context;
    }

    public async Task<CommandResult> ExecuteAsync(string[] args, ICommandSender? sender = null)
    {
        if (sender == null)
        {
            return CommandResult.Fail("æ­¤å‘½ä»¤åªèƒ½åœ¨æ¸¸æˆå†…ä½¿ç”¨");
        }
        
        if (args.Length == 0)
        {
            return CommandResult.Fail($"ç”¨æ³•: {Usage}");
        }
        
        // ä¼ é€åˆ°ç©å®¶
        if (args.Length == 1)
        {
            string targetPlayer = args[0];
            await _context.GameDisplayApi.TeleportPlayerToPlayer(sender.Name, targetPlayer);
            return CommandResult.Success($"Â§aå·²ä¼ é€åˆ° {targetPlayer}");
        }
        
        // ä¼ é€åˆ°åæ ‡
        if (args.Length == 3)
        {
            if (!int.TryParse(args[0], out int x) ||
                !int.TryParse(args[1], out int y) ||
                !int.TryParse(args[2], out int z))
            {
                return CommandResult.Fail("Â§cåæ ‡å¿…é¡»æ˜¯æ•´æ•°");
            }
            
            await _context.GameDisplayApi.TeleportPlayer(sender.Name, x, y, z);
            return CommandResult.Success($"Â§aå·²ä¼ é€åˆ° ({x}, {y}, {z})");
        }
        
        return CommandResult.Fail($"ç”¨æ³•: {Usage}");
    }

    public async Task<List<string>> TabCompleteAsync(string[] args, ICommandSender? sender = null)
    {
        // ç¬¬ä¸€ä¸ªå‚æ•°ï¼šåœ¨çº¿ç©å®¶åˆ—è¡¨
        if (args.Length == 1)
        {
            return GetOnlinePlayerNames();
        }
        
        return new List<string>();
    }
    
    private List<string> GetOnlinePlayerNames()
    {
        // å®ç°è·å–åœ¨çº¿ç©å®¶åˆ—è¡¨çš„é€»è¾‘
        return new List<string> { "Steve", "Alex" };
    }
}
```

### **å­å‘½ä»¤ç³»ç»Ÿ**

```csharp
public class PluginCommand : ICommand
{
    private readonly IPluginContext _context;
    
    public string Name => "plugin";
    public string Description => "æ’ä»¶ç®¡ç†å‘½ä»¤";
    public string? Permission => "nethergate.plugin";
    public string? Usage => "#plugin <list|reload|info> [name]";

    public PluginCommand(IPluginContext context)
    {
        _context = context;
    }

    public async Task<CommandResult> ExecuteAsync(string[] args, ICommandSender? sender = null)
    {
        if (args.Length == 0)
        {
            return CommandResult.Fail($"ç”¨æ³•: {Usage}");
        }
        
        string subCommand = args[0].ToLower();
        
        return subCommand switch
        {
            "list" => await ListPlugins(),
            "reload" => await ReloadPlugin(args),
            "info" => await ShowPluginInfo(args),
            _ => CommandResult.Fail($"æœªçŸ¥å­å‘½ä»¤: {subCommand}\nç”¨æ³•: {Usage}")
        };
    }

    private async Task<CommandResult> ListPlugins()
    {
        var plugins = _context.PluginManager.GetLoadedPlugins();
        var message = $"Â§aå·²åŠ è½½æ’ä»¶ ({plugins.Count}):\n";
        
        foreach (var plugin in plugins)
        {
            message += $"Â§f- {plugin.Name} v{plugin.Version}\n";
        }
        
        return CommandResult.Success(message);
    }

    private async Task<CommandResult> ReloadPlugin(string[] args)
    {
        if (args.Length < 2)
        {
            return CommandResult.Fail("ç”¨æ³•: #plugin reload <name>");
        }
        
        string pluginName = args[1];
        await _context.PluginManager.ReloadPluginAsync(pluginName);
        
        return CommandResult.Success($"Â§aæ’ä»¶ {pluginName} å·²é‡è½½");
    }

    private async Task<CommandResult> ShowPluginInfo(string[] args)
    {
        if (args.Length < 2)
        {
            return CommandResult.Fail("ç”¨æ³•: #plugin info <name>");
        }
        
        string pluginName = args[1];
        var plugin = _context.PluginManager.GetPlugin(pluginName);
        
        if (plugin == null)
        {
            return CommandResult.Fail($"Â§cæ’ä»¶ {pluginName} æœªæ‰¾åˆ°");
        }
        
        var info = $"Â§6æ’ä»¶ä¿¡æ¯:\n" +
                   $"Â§fåç§°: {plugin.Name}\n" +
                   $"Â§fç‰ˆæœ¬: {plugin.Version}\n" +
                   $"Â§fä½œè€…: {plugin.Author}\n" +
                   $"Â§fæè¿°: {plugin.Description}";
        
        return CommandResult.Success(info);
    }

    public async Task<List<string>> TabCompleteAsync(string[] args, ICommandSender? sender = null)
    {
        // ç¬¬ä¸€ä¸ªå‚æ•°ï¼šå­å‘½ä»¤
        if (args.Length == 1)
        {
            return new List<string> { "list", "reload", "info" };
        }
        
        // ç¬¬äºŒä¸ªå‚æ•°ï¼šæ’ä»¶åç§°
        if (args.Length == 2 && (args[0] == "reload" || args[0] == "info"))
        {
            return _context.PluginManager.GetLoadedPlugins()
                .Select(p => p.Name)
                .ToList();
        }
        
        return new List<string>();
    }
}
```

---

## ğŸ“ **æ³¨å†Œå‘½ä»¤**

### **åœ¨æ’ä»¶ä¸­æ³¨å†Œ**

```csharp
public class MyPlugin : IPlugin
{
    private IPluginContext _context;

    public void OnEnable(IPluginContext context)
    {
        _context = context;
        
        // æ³¨å†Œå¤šä¸ªå‘½ä»¤
        context.CommandManager.RegisterCommand(new SpawnCommand(context));
        context.CommandManager.RegisterCommand(new TeleportCommand(context));
        context.CommandManager.RegisterCommand(new HomeCommand(context));
        
        context.Logger.Info("å‘½ä»¤å·²æ³¨å†Œ");
    }

    public void OnDisable()
    {
        // æ¡†æ¶ä¼šè‡ªåŠ¨æ³¨é”€æ’ä»¶çš„å‘½ä»¤
        _context.Logger.Info("å‘½ä»¤å·²æ³¨é”€");
    }
}
```

### **åŠ¨æ€æ³¨å†Œå’Œæ³¨é”€**

```csharp
// åŠ¨æ€æ³¨å†Œ
var command = new MyCommand();
_context.CommandManager.RegisterCommand(command);

// åŠ¨æ€æ³¨é”€
_context.CommandManager.UnregisterCommand("mycommand");
```

---

## ğŸ¨ **å‘½ä»¤å‰ç¼€**

### **æ§åˆ¶å°å‘½ä»¤ï¼ˆæ— å‰ç¼€ï¼‰**

ä» NetherGate æ§åˆ¶å°æ‰§è¡Œçš„å‘½ä»¤**ä¸éœ€è¦ä»»ä½•å‰ç¼€**ï¼š

```bash
> help
> plugin list
> permission reload
> stop
```

### **æ¸¸æˆå†…å‘½ä»¤ï¼ˆ# å‰ç¼€ï¼‰**

ä» Minecraft èŠå¤©æ¡†æ‰§è¡Œçš„æ¡†æ¶å‘½ä»¤**å¿…é¡»ä½¿ç”¨ `#` å‰ç¼€**ï¼š

```
#help
#spawn
#tp Steve
#home
```

**ä¸ºä»€ä¹ˆä½¿ç”¨ `#` è€Œä¸æ˜¯ `/`ï¼Ÿ**
- `/` æ˜¯ Minecraft åŸç”Ÿå‘½ä»¤çš„å‰ç¼€ï¼ˆå¦‚ `/give`, `/tp` ç­‰ï¼‰
- `#` æ˜¯ NetherGate æ¡†æ¶å‘½ä»¤çš„å‰ç¼€ï¼Œé¿å…å†²çª
- è¿™æ ·å¯ä»¥åŒæ—¶ä½¿ç”¨åŸç‰ˆå‘½ä»¤å’Œæ¡†æ¶å‘½ä»¤

### **RCON å‘½ä»¤ï¼ˆ/ å‰ç¼€ï¼‰**

é€šè¿‡ `GameDisplayApi` å‘é€çš„å‘½ä»¤æ˜¯åŸç”Ÿ Minecraft å‘½ä»¤ï¼Œä½¿ç”¨ `/` å‰ç¼€ï¼š

```csharp
await _context.GameDisplayApi.TeleportPlayer("Steve", 0, 64, 0);
// å†…éƒ¨æ‰§è¡Œ: /tp Steve 0 64 0
```

---

## ğŸ”’ **æƒé™æ£€æŸ¥**

### **è‡ªåŠ¨æƒé™æ£€æŸ¥**

æ¡†æ¶ä¼šè‡ªåŠ¨æ£€æŸ¥å‘½ä»¤çš„ `Permission` å±æ€§ï¼š

```csharp
public class AdminCommand : ICommand
{
    public string Name => "admin";
    public string? Permission => "myplugin.admin";  // æ¡†æ¶è‡ªåŠ¨æ£€æŸ¥

    public async Task<CommandResult> ExecuteAsync(string[] args, ICommandSender? sender = null)
    {
        // å¦‚æœç©å®¶æ²¡æœ‰ myplugin.admin æƒé™ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨æ‹’ç»æ‰§è¡Œ
        return CommandResult.Success("ç®¡ç†å‘˜æ“ä½œæˆåŠŸ");
    }
}
```

### **æ‰‹åŠ¨æƒé™æ£€æŸ¥**

```csharp
public async Task<CommandResult> ExecuteAsync(string[] args, ICommandSender? sender = null)
{
    if (sender != null)
    {
        // æ‰‹åŠ¨æ£€æŸ¥æƒé™
        if (!await _context.PermissionManager.HasPermissionAsync(sender.Name, "myplugin.vip"))
        {
            return CommandResult.Fail("Â§cæ­¤åŠŸèƒ½ä»…é™ VIP ä½¿ç”¨");
        }
    }
    
    // æ‰§è¡Œå‘½ä»¤é€»è¾‘
    return CommandResult.Success("æ“ä½œæˆåŠŸ");
}
```

### **å¤šæƒé™æ£€æŸ¥**

```csharp
public async Task<CommandResult> ExecuteAsync(string[] args, ICommandSender? sender = null)
{
    if (sender != null)
    {
        bool hasAnyPermission = 
            await _context.PermissionManager.HasPermissionAsync(sender.Name, "myplugin.admin") ||
            await _context.PermissionManager.HasPermissionAsync(sender.Name, "myplugin.moderator");
        
        if (!hasAnyPermission)
        {
            return CommandResult.Fail("Â§cä½ éœ€è¦ç®¡ç†å‘˜æˆ–ç‰ˆä¸»æƒé™");
        }
    }
    
    return CommandResult.Success("æ“ä½œæˆåŠŸ");
}
```

---

## âŒ¨ï¸ **Tab è¡¥å…¨**

### **åŸºæœ¬è¡¥å…¨**

```csharp
public async Task<List<string>> TabCompleteAsync(string[] args, ICommandSender? sender = null)
{
    // ç¬¬ä¸€ä¸ªå‚æ•°ï¼šå­å‘½ä»¤
    if (args.Length == 1)
    {
        return new List<string> { "create", "delete", "list" };
    }
    
    // ç¬¬äºŒä¸ªå‚æ•°ï¼šåç§°
    if (args.Length == 2)
    {
        return GetAvailableNames();
    }
    
    return new List<string>();
}
```

### **åŠ¨æ€è¡¥å…¨**

```csharp
public async Task<List<string>> TabCompleteAsync(string[] args, ICommandSender? sender = null)
{
    if (args.Length == 1)
    {
        // æ ¹æ®å·²è¾“å…¥å†…å®¹è¿‡æ»¤
        string input = args[0].ToLower();
        var allPlayers = GetOnlinePlayerNames();
        return allPlayers.Where(p => p.ToLower().StartsWith(input)).ToList();
    }
    
    return new List<string>();
}
```

### **å¤šçº§è¡¥å…¨**

```csharp
public async Task<List<string>> TabCompleteAsync(string[] args, ICommandSender? sender = null)
{
    if (args.Length == 1)
    {
        // ç¬¬ä¸€çº§ï¼šå­å‘½ä»¤
        return new List<string> { "add", "remove", "list" };
    }
    
    if (args.Length == 2)
    {
        // ç¬¬äºŒçº§ï¼šæ ¹æ®å­å‘½ä»¤è¿”å›ä¸åŒé€‰é¡¹
        return args[0].ToLower() switch
        {
            "add" => GetAvailableItems(),
            "remove" => GetPlayerItems(sender?.Name),
            "list" => new List<string>(),
            _ => new List<string>()
        };
    }
    
    return new List<string>();
}
```

---

## ğŸ”— **å‘½ä»¤åˆ«å**

å‘½ä»¤åˆ«åå…è®¸ç”¨æˆ·ä½¿ç”¨ä¸åŒçš„åç§°æ‰§è¡ŒåŒä¸€å‘½ä»¤ï¼Œæ”¯æŒå¤šè¯­è¨€å’Œè‡ªå®šä¹‰ç¼©å†™ã€‚

### **å®šä¹‰åˆ«å**

```csharp
public class TeleportCommand : ICommand
{
    public string Name => "teleport";
    public string[] Aliases => new[] { "tp", "tele", "ä¼ é€", "ç¬ç§»" };  // æ”¯æŒå¤šä¸ªåˆ«å

    // ...
}
```

ä½¿ç”¨åˆ«åï¼š
```bash
#teleport Steve 0 64 0
#tp Steve 0 64 0        # ä½¿ç”¨åˆ«å tp
#tele Steve 0 64 0      # ä½¿ç”¨åˆ«å tele
#ä¼ é€ Steve 0 64 0      # ä¸­æ–‡åˆ«å
#ç¬ç§» Steve 0 64 0      # ä¸­æ–‡åŒä¹‰è¯
```

### **å¤šè¯­è¨€æ”¯æŒç¤ºä¾‹**

å®Œæ•´çš„å¤šè¯­è¨€å‘½ä»¤åˆ«åç¤ºä¾‹ï¼š

```csharp
public class BackupCommand : ICommand
{
    private readonly PluginBase _plugin;
    
    public string Name => "backup";
    public string Description => "åˆ›å»ºæœåŠ¡å™¨å¤‡ä»½";
    public string Usage => "#backup [create|restore|list] [name]";
    
    // å¤šè¯­è¨€åˆ«å
    public string[] Aliases => new[]
    {
        // è‹±æ–‡
        "bak",              // ç¼©å†™
        "save",             // åŒä¹‰è¯
        "backup-server",    // è¯¦ç»†æè¿°
        
        // ä¸­æ–‡
        "å¤‡ä»½",
        "ä¿å­˜",
        "å­˜æ¡£",
        
        // æ—¥æ–‡
        "ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—",
        
        // å…¶ä»–è¯­è¨€
        "sicherung",        // å¾·è¯­
        "sauvegarde"        // æ³•è¯­
    };
    
    public string PluginId => _plugin.Metadata.Id;
    public string? Permission => "myplugin.backup";
    
    public BackupCommand(PluginBase plugin)
    {
        _plugin = plugin;
    }
    
    public async Task<CommandResult> ExecuteAsync(ICommandSender sender, string[] args)
    {
        if (args.Length == 0)
        {
            // åˆ›å»ºå¤‡ä»½
            var name = DateTime.Now.ToString("yyyyMMdd_HHmmss");
            await _plugin.BackupManager.CreateBackupAsync(name);
            return CommandResult.Ok($"âœ“ å¤‡ä»½å·²åˆ›å»º: {name}");
        }
        
        var action = args[0].ToLower();
        
        return action switch
        {
            "list" or "åˆ—è¡¨" or "ãƒªã‚¹ãƒˆ" => await ListBackupsAsync(),
            "restore" or "æ¢å¤" or "å¾©å…ƒ" => await RestoreBackupAsync(args),
            "create" or "åˆ›å»º" or "ä½œæˆ" => await CreateBackupAsync(args),
            _ => CommandResult.Fail($"æœªçŸ¥æ“ä½œ: {action}")
        };
    }
    
    public async Task<List<string>> TabCompleteAsync(ICommandSender sender, string[] args)
    {
        if (args.Length == 1)
        {
            // è¡¥å…¨å­å‘½ä»¤ï¼ˆå¤šè¯­è¨€ï¼‰
            return new List<string> 
            { 
                "create", "åˆ›å»º", "ä½œæˆ",
                "restore", "æ¢å¤", "å¾©å…ƒ",
                "list", "åˆ—è¡¨", "ãƒªã‚¹ãƒˆ"
            }
            .Where(cmd => cmd.StartsWith(args[0], StringComparison.OrdinalIgnoreCase))
            .ToList();
        }
        
        if (args.Length == 2 && (args[0] == "restore" || args[0] == "æ¢å¤" || args[0] == "å¾©å…ƒ"))
        {
            // è¡¥å…¨å¤‡ä»½åç§°
            var backups = await _plugin.BackupManager.ListBackupsAsync();
            return backups.Where(b => b.StartsWith(args[1])).ToList();
        }
        
        return new List<string>();
    }
}
```

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```bash
# è‹±æ–‡ç”¨æˆ·
backup list
bak create world1
save restore world1_20250105

# ä¸­æ–‡ç”¨æˆ·
å¤‡ä»½ åˆ—è¡¨
ä¿å­˜ åˆ›å»º world1
å­˜æ¡£ æ¢å¤ world1_20250105

# æ—¥æ–‡ç”¨æˆ·
ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— ãƒªã‚¹ãƒˆ
ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— ä½œæˆ world1

# æ‰€æœ‰åˆ«åéƒ½æ”¯æŒ Tab è¡¥å…¨
bak li[Tab]      â†’ list, åˆ—è¡¨, ãƒªã‚¹ãƒˆ
å¤‡ä»½ åˆ›[Tab]     â†’ åˆ›å»º, ä½œæˆ
```

### **åˆ«åæœ€ä½³å®è·µ**

#### **1. æä¾›å¸¸ç”¨ç¼©å†™**

```csharp
public string Name => "gamemode";
public string[] Aliases => new[]
{
    "gm",          // é€šç”¨ç¼©å†™
    "mode",        // ç®€çŸ­åŒä¹‰è¯
    "æ¸¸æˆæ¨¡å¼",    // æœ¬åœ°åŒ–
    "ã‚²ãƒ¼ãƒ ãƒ¢ãƒ¼ãƒ‰"  // æ—¥æ–‡
};
```

#### **2. æ”¯æŒåŒä¹‰è¯**

```csharp
public string Name => "home";
public string[] Aliases => new[]
{
    "h",           // ç¼©å†™
    "spawn",       // è‹±æ–‡åŒä¹‰è¯
    "å›å®¶",        // ä¸­æ–‡
    "å®¶",          // ä¸­æ–‡ç®€å†™
    "ãƒ›ãƒ¼ãƒ "       // æ—¥æ–‡
};
```

#### **3. è€ƒè™‘ç”¨æˆ·ä¹ æƒ¯**

```csharp
// å¦‚æœç”¨æˆ·ä¹ æƒ¯ MCDR æˆ–å…¶ä»–å·¥å…·çš„å‘½ä»¤
public string Name => "reload";
public string[] Aliases => new[]
{
    "rl",          // MCDR é£æ ¼ç¼©å†™
    "é‡è½½",        // ä¸­æ–‡
    "ãƒªãƒ­ãƒ¼ãƒ‰"     // æ—¥æ–‡
};
```

### **åŠ¨æ€åˆ«åæ³¨å†Œ**

æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½éœ€è¦åŠ¨æ€æ³¨å†Œåˆ«åï¼š

```csharp
public class MyPlugin : PluginBase
{
    public override async Task OnEnableAsync()
    {
        // æ³¨å†Œä¸»å‘½ä»¤
        var command = new MyCommand(this);
        Commands.RegisterCommand(command);
        
        // æ ¹æ®é…ç½®æ–‡ä»¶åŠ¨æ€æ·»åŠ åˆ«å
        var config = await Config.LoadAsync<MyConfig>();
        foreach (var alias in config.CustomAliases)
        {
            Commands.RegisterAlias("mycommand", alias);
        }
    }
}
```

### **æ³¨æ„äº‹é¡¹**

- âœ… **åˆ«åå¿…é¡»å”¯ä¸€**ï¼šä¸èƒ½ä¸å…¶ä»–å‘½ä»¤æˆ–åˆ«åå†²çª
- âœ… **æ”¯æŒ Unicode**ï¼šæ”¯æŒä»»æ„ Unicode å­—ç¬¦ï¼ˆä¸­æ–‡ã€æ—¥æ–‡ã€è¡¨æƒ…ç¬¦å·ç­‰ï¼‰
- âœ… **Tab è¡¥å…¨**ï¼šTab è¡¥å…¨ä¼šåŒæ—¶åŒ¹é…ä¸»å‘½ä»¤å’Œæ‰€æœ‰åˆ«å
- âœ… **åŒºåˆ†å¤§å°å†™**ï¼šé»˜è®¤ä¸åŒºåˆ†å¤§å°å†™ï¼ˆ`TP` å’Œ `tp` ç›¸åŒï¼‰
- âš ï¸ **é¿å…è¿‡äºé€šç”¨**ï¼šä¸è¦ä½¿ç”¨è¿‡äºç®€çŸ­çš„åˆ«åï¼ˆå¦‚ `a`, `b`ï¼‰ï¼Œå¯èƒ½å¯¼è‡´æ··æ·†
- âš ï¸ **ä¿æŒç›´è§‚**ï¼šåˆ«ååº”è¯¥æ˜“è®°ä¸”ä¸å‘½ä»¤åŠŸèƒ½ç›¸å…³

---

## ğŸ’¡ **æœ€ä½³å®è·µ**

### **1. æ¸…æ™°çš„ä½¿ç”¨è¯´æ˜**

âœ… **æ¨èï¼š**
```csharp
public string? Usage => "#tp <x> <y> <z> æˆ– #tp <ç©å®¶>";
```

âŒ **ä¸æ¨èï¼š**
```csharp
public string? Usage => "#tp";  // ä¸å¤Ÿè¯¦ç»†
```

### **2. å‚æ•°éªŒè¯**

```csharp
public async Task<CommandResult> ExecuteAsync(string[] args, ICommandSender? sender = null)
{
    // æ£€æŸ¥å‚æ•°æ•°é‡
    if (args.Length < 2)
    {
        return CommandResult.Fail($"Â§cç”¨æ³•: {Usage}");
    }
    
    // éªŒè¯å‚æ•°ç±»å‹
    if (!int.TryParse(args[0], out int value))
    {
        return CommandResult.Fail("Â§cç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯æ•´æ•°");
    }
    
    // éªŒè¯å‚æ•°èŒƒå›´
    if (value < 0 || value > 100)
    {
        return CommandResult.Fail("Â§cæ•°å€¼å¿…é¡»åœ¨ 0-100 ä¹‹é—´");
    }
    
    return CommandResult.Success("æ“ä½œæˆåŠŸ");
}
```

### **3. å‹å¥½çš„é”™è¯¯æ¶ˆæ¯**

```csharp
// âœ… æä¾›å…·ä½“çš„é”™è¯¯ä¿¡æ¯å’Œè§£å†³æ–¹æ¡ˆ
return CommandResult.Fail("Â§cç©å®¶ 'Steve' ä¸åœ¨çº¿\nÂ§7æç¤º: ä½¿ç”¨ #list æŸ¥çœ‹åœ¨çº¿ç©å®¶");

// âŒ æ¨¡ç³Šçš„é”™è¯¯ä¿¡æ¯
return CommandResult.Fail("é”™è¯¯");
```

### **4. å¼‚æ­¥æ“ä½œ**

```csharp
public async Task<CommandResult> ExecuteAsync(string[] args, ICommandSender? sender = null)
{
    // ä½¿ç”¨ await è¿›è¡Œå¼‚æ­¥æ“ä½œ
    await _context.GameDisplayApi.TeleportPlayer(sender.Name, 0, 64, 0);
    await Task.Delay(1000);
    await _context.GameDisplayApi.SendChatMessage(sender.Name, "ä¼ é€å®Œæˆ");
    
    return CommandResult.Success("æ“ä½œæˆåŠŸ");
}
```

### **5. æ§åˆ¶å°å…¼å®¹æ€§**

```csharp
public async Task<CommandResult> ExecuteAsync(string[] args, ICommandSender? sender = null)
{
    // æŸäº›å‘½ä»¤åªèƒ½åœ¨æ¸¸æˆå†…ä½¿ç”¨
    if (sender == null)
    {
        return CommandResult.Fail("æ­¤å‘½ä»¤åªèƒ½åœ¨æ¸¸æˆå†…ä½¿ç”¨");
    }
    
    // æŸäº›å‘½ä»¤å¯ä»¥åœ¨æ§åˆ¶å°å’Œæ¸¸æˆå†…ä½¿ç”¨
    if (sender == null)
    {
        // æ§åˆ¶å°æ‰§è¡Œ
        _context.Logger.Info("å‘½ä»¤æ‰§è¡ŒæˆåŠŸ");
    }
    else
    {
        // æ¸¸æˆå†…æ‰§è¡Œ
        await _context.GameDisplayApi.SendChatMessage(sender.Name, "Â§aå‘½ä»¤æ‰§è¡ŒæˆåŠŸ");
    }
    
    return CommandResult.Success();
}
```

---

## ğŸ“š **ç›¸å…³æ–‡æ¡£**

- [æƒé™ç³»ç»Ÿ](./æƒé™ç³»ç»Ÿ.md)
- [æ¸¸æˆæ˜¾ç¤º API](../04-é«˜çº§åŠŸèƒ½/æ¸¸æˆæ˜¾ç¤ºAPI.md)
- [æ’ä»¶å¼€å‘æŒ‡å—](../03-æ’ä»¶å¼€å‘/æ’ä»¶å¼€å‘æŒ‡å—.md)

---

**æ–‡æ¡£ç»´æŠ¤è€…ï¼š** NetherGate å¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°ï¼š** 2025-10-05
