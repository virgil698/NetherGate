# æ–‡æœ¬ç»„ä»¶

NetherGate æä¾›äº†å¼ºå¤§çš„æ–‡æœ¬ç»„ä»¶ç³»ç»Ÿï¼Œè®©ä½ å¯ä»¥åˆ›å»ºå¯Œæ–‡æœ¬æ¶ˆæ¯ï¼Œæ”¯æŒé¢œè‰²ã€æ ¼å¼ã€ç‚¹å‡»å’Œæ‚¬åœäº‹ä»¶ç­‰é«˜çº§åŠŸèƒ½ã€‚

---

## ğŸ“‹ **ç›®å½•**

- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [åŸºæœ¬æ ·å¼](#åŸºæœ¬æ ·å¼)
- [äº¤äº’äº‹ä»¶](#äº¤äº’äº‹ä»¶)
- [ç»„åˆæ–‡æœ¬](#ç»„åˆæ–‡æœ¬)
- [å®æˆ˜ç¤ºä¾‹](#å®æˆ˜ç¤ºä¾‹)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

---

## ğŸš€ **å¿«é€Ÿå¼€å§‹**

### **åˆ›å»ºç®€å•æ–‡æœ¬**

```csharp
using NetherGate.API.GameDisplay;

// åˆ›å»ºå½©è‰²æ–‡æœ¬
var text = new TextComponent("æ¬¢è¿æ¥åˆ°æœåŠ¡å™¨ï¼")
    .SetColor(TextColor.Gold)
    .SetBold(true);

await _gameDisplay.SendTextComponentAsync(playerName, text);
```

### **å‘é€åˆ°ç©å®¶**

```csharp
// å‘é€åˆ°ç‰¹å®šç©å®¶
await _gameDisplay.SendTextComponentAsync("Steve", text);

// å¹¿æ’­ç»™æ‰€æœ‰ç©å®¶
await _gameDisplay.BroadcastTextComponentAsync(text);
```

---

## ğŸ¨ **åŸºæœ¬æ ·å¼**

### **é¢œè‰²**

```csharp
public enum TextColor
{
    Black,       // Â§0
    DarkBlue,    // Â§1
    DarkGreen,   // Â§2
    DarkAqua,    // Â§3
    DarkRed,     // Â§4
    DarkPurple,  // Â§5
    Gold,        // Â§6
    Gray,        // Â§7
    DarkGray,    // Â§8
    Blue,        // Â§9
    Green,       // Â§a
    Aqua,        // Â§b
    Red,         // Â§c
    LightPurple, // Â§d
    Yellow,      // Â§e
    White        // Â§f
}
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```csharp
var redText = new TextComponent("è­¦å‘Šï¼").SetColor(TextColor.Red);
var goldText = new TextComponent("æç¤ºï¼š").SetColor(TextColor.Gold);
```

### **æ ¼å¼**

```csharp
var formatted = new TextComponent("æ ¼å¼åŒ–æ–‡æœ¬")
    .SetBold(true)           // Â§l ç²—ä½“
    .SetItalic(true)         // Â§o æ–œä½“
    .SetUnderlined(true)     // Â§n ä¸‹åˆ’çº¿
    .SetStrikethrough(true)  // Â§m åˆ é™¤çº¿
    .SetObfuscated(true);    // Â§k æ··æ·†ï¼ˆåŠ¨æ€éšæœºå­—ç¬¦ï¼‰
```

### **é‡ç½®æ ¼å¼**

```csharp
var text = new TextComponent("æ­£å¸¸æ–‡æœ¬")
    .SetBold(true)
    .Append(" ç»§ç»­ç²—ä½“ ")
    .Append(new TextComponent("æ™®é€šæ–‡æœ¬").SetReset(true));
    // ä½¿ç”¨ SetReset() æ¸…é™¤æ‰€æœ‰æ ¼å¼
```

---

## ğŸ–±ï¸ **äº¤äº’äº‹ä»¶**

### **ç‚¹å‡»äº‹ä»¶**

```csharp
public enum ClickAction
{
    RunCommand,      // æ‰§è¡Œå‘½ä»¤
    SuggestCommand,  // å»ºè®®å‘½ä»¤ï¼ˆå¡«å……åˆ°èŠå¤©æ¡†ï¼‰
    OpenUrl,         // æ‰“å¼€URL
    CopyToClipboard  // å¤åˆ¶åˆ°å‰ªè´´æ¿
}
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```csharp
// ç‚¹å‡»æ‰§è¡Œå‘½ä»¤
var clickText = new TextComponent("[ç‚¹å‡»é¢†å–å¥–åŠ±]")
    .SetColor(TextColor.Green)
    .SetClickEvent(new ClickEvent(
        ClickAction.RunCommand,
        "/give @s diamond 64"
    ));

// ç‚¹å‡»æ‰“å¼€ç½‘ç«™
var urlText = new TextComponent("è®¿é—®å®˜ç½‘")
    .SetColor(TextColor.Blue)
    .SetUnderlined(true)
    .SetClickEvent(new ClickEvent(
        ClickAction.OpenUrl,
        "https://example.com"
    ));

// ç‚¹å‡»å»ºè®®å‘½ä»¤
var suggestText = new TextComponent("[ä¼ é€]")
    .SetColor(TextColor.Yellow)
    .SetClickEvent(new ClickEvent(
        ClickAction.SuggestCommand,
        "/tp @s "
    ));
```

### **æ‚¬åœäº‹ä»¶**

```csharp
public enum HoverAction
{
    ShowText,   // æ˜¾ç¤ºæ–‡æœ¬
    ShowItem,   // æ˜¾ç¤ºç‰©å“
    ShowEntity  // æ˜¾ç¤ºå®ä½“
}
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```csharp
// æ‚¬åœæ˜¾ç¤ºè¯´æ˜
var hoverText = new TextComponent("ç¥ç§˜ç®±å­")
    .SetColor(TextColor.Gold)
    .SetHoverEvent(new HoverEvent(
        HoverAction.ShowText,
        "ç‚¹å‡»æ‰“å¼€ç®±å­\nå¯èƒ½åŒ…å«ï¼š\n- é’»çŸ³ x64\n- é‡‘é”­ x32"
    ));

// æ‚¬åœæ˜¾ç¤ºç‰©å“
var itemText = new TextComponent("[é’»çŸ³å‰‘]")
    .SetColor(TextColor.Aqua)
    .SetHoverEvent(new HoverEvent(
        HoverAction.ShowItem,
        "{id:\"minecraft:diamond_sword\",Count:1}"
    ));
```

### **ç»„åˆç‚¹å‡»å’Œæ‚¬åœ**

```csharp
var interactive = new TextComponent("[å•†åº—]")
    .SetColor(TextColor.Gold)
    .SetBold(true)
    .SetClickEvent(new ClickEvent(
        ClickAction.RunCommand,
        "/shop open"
    ))
    .SetHoverEvent(new HoverEvent(
        HoverAction.ShowText,
        "Â§6ç‚¹å‡»æ‰“å¼€å•†åº—\nÂ§7è´­ä¹°å„ç§é“å…·"
    ));
```

---

## ğŸ”— **ç»„åˆæ–‡æœ¬**

### **è¿½åŠ æ–‡æœ¬**

```csharp
var message = new TextComponent("æ¬¢è¿ ")
    .SetColor(TextColor.Yellow)
    .Append(new TextComponent("Steve").SetColor(TextColor.Gold).SetBold(true))
    .Append(new TextComponent(" åŠ å…¥æœåŠ¡å™¨ï¼").SetColor(TextColor.Yellow));
// ç»“æœ: "æ¬¢è¿ Steve åŠ å…¥æœåŠ¡å™¨ï¼" (Steve æ˜¯ç²—ä½“é‡‘è‰²)
```

### **æ·»åŠ é¢å¤–æ–‡æœ¬**

```csharp
var complex = new TextComponent("ç³»ç»Ÿ")
    .SetColor(TextColor.DarkGray)
    .AddExtra(new TextComponent(" > ").SetColor(TextColor.Gray))
    .AddExtra(new TextComponent("æ¶ˆæ¯å†…å®¹").SetColor(TextColor.White));
```

### **æ¢è¡Œ**

```csharp
var multiLine = new TextComponent("ç¬¬ä¸€è¡Œ")
    .Append("\n")
    .Append(new TextComponent("ç¬¬äºŒè¡Œ"))
    .Append("\n")
    .Append(new TextComponent("ç¬¬ä¸‰è¡Œ"));
```

---

## ğŸ’¼ **å®æˆ˜ç¤ºä¾‹**

### **ç¤ºä¾‹1ï¼šäº¤äº’å¼èœå•**

```csharp
public class MenuCommand : ICommand
{
    public async Task<CommandResult> ExecuteAsync(ICommandSender sender, string[] args)
    {
        var menu = new TextComponent("=== ä¸»èœå• ===\n")
            .SetColor(TextColor.Gold)
            .SetBold(true)
            .Append(new TextComponent("\n"))
            
            // ä¼ é€é€‰é¡¹
            .Append(new TextComponent("âš¡ ")
                .SetColor(TextColor.Yellow))
            .Append(new TextComponent("[ä¼ é€]")
                .SetColor(TextColor.Green)
                .SetClickEvent(new ClickEvent(
                    ClickAction.RunCommand,
                    "/teleport menu"
                ))
                .SetHoverEvent(new HoverEvent(
                    HoverAction.ShowText,
                    "Â§aæ‰“å¼€ä¼ é€èœå•"
                )))
            .Append(new TextComponent(" | "))
            
            // å•†åº—é€‰é¡¹
            .Append(new TextComponent("ğŸ›’ ")
                .SetColor(TextColor.Yellow))
            .Append(new TextComponent("[å•†åº—]")
                .SetColor(TextColor.Green)
                .SetClickEvent(new ClickEvent(
                    ClickAction.RunCommand,
                    "/shop"
                ))
                .SetHoverEvent(new HoverEvent(
                    HoverAction.ShowText,
                    "Â§aæ‰“å¼€å•†åº—"
                )))
            .Append(new TextComponent(" | "))
            
            // å¸®åŠ©é€‰é¡¹
            .Append(new TextComponent("â“ ")
                .SetColor(TextColor.Yellow))
            .Append(new TextComponent("[å¸®åŠ©]")
                .SetColor(TextColor.Green)
                .SetClickEvent(new ClickEvent(
                    ClickAction.RunCommand,
                    "/help"
                ))
                .SetHoverEvent(new HoverEvent(
                    HoverAction.ShowText,
                    "Â§aæŸ¥çœ‹å¸®åŠ©æ–‡æ¡£"
                )));
        
        await _gameDisplay.SendTextComponentAsync(sender.Name, menu);
        return CommandResult.Ok();
    }
}
```

### **ç¤ºä¾‹2ï¼šç©å®¶ä¿¡æ¯å¡ç‰‡**

```csharp
public async Task ShowPlayerCardAsync(string targetPlayer, string viewer)
{
    var stats = await GetPlayerStatsAsync(targetPlayer);
    
    var card = new TextComponent($"=== {targetPlayer} çš„ä¿¡æ¯ ===\n")
        .SetColor(TextColor.Gold)
        .SetBold(true)
        .Append(new TextComponent("\n"))
        
        // ç­‰çº§
        .Append(new TextComponent("â­ ç­‰çº§: ")
            .SetColor(TextColor.Yellow))
        .Append(new TextComponent($"{stats.Level}\n")
            .SetColor(TextColor.White))
        
        // æ¸¸æˆæ—¶é—´
        .Append(new TextComponent("â° æ¸¸æˆæ—¶é—´: ")
            .SetColor(TextColor.Yellow))
        .Append(new TextComponent($"{stats.PlayTime} å°æ—¶\n")
            .SetColor(TextColor.White))
        
        // æ“ä½œæŒ‰é’®
        .Append(new TextComponent("\n"))
        .Append(new TextComponent("[æ·»åŠ å¥½å‹]")
            .SetColor(TextColor.Green)
            .SetClickEvent(new ClickEvent(
                ClickAction.RunCommand,
                $"/friend add {targetPlayer}"
            ))
            .SetHoverEvent(new HoverEvent(
                HoverAction.ShowText,
                $"Â§aæ·»åŠ  {targetPlayer} ä¸ºå¥½å‹"
            )))
        .Append(new TextComponent(" "))
        .Append(new TextComponent("[ä¼ é€è¯·æ±‚]")
            .SetColor(TextColor.Aqua)
            .SetClickEvent(new ClickEvent(
                ClickAction.RunCommand,
                $"/tpa {targetPlayer}"
            ))
            .SetHoverEvent(new HoverEvent(
                HoverAction.ShowText,
                $"Â§bè¯·æ±‚ä¼ é€åˆ° {targetPlayer}"
            )));
    
    await _gameDisplay.SendTextComponentAsync(viewer, card);
}
```

### **ç¤ºä¾‹3ï¼šä»»åŠ¡ç³»ç»Ÿ**

```csharp
public async Task ShowQuestListAsync(string playerName)
{
    var quests = await GetPlayerQuestsAsync(playerName);
    
    var questList = new TextComponent("=== å¯ç”¨ä»»åŠ¡ ===\n")
        .SetColor(TextColor.Gold)
        .SetBold(true);
    
    foreach (var quest in quests)
    {
        var status = quest.IsCompleted 
            ? new TextComponent("âœ“ ").SetColor(TextColor.Green)
            : new TextComponent("â—‹ ").SetColor(TextColor.Gray);
        
        var questLine = status
            .Append(new TextComponent(quest.Name)
                .SetColor(quest.IsCompleted ? TextColor.Gray : TextColor.Yellow)
                .SetStrikethrough(quest.IsCompleted)
                .SetClickEvent(new ClickEvent(
                    ClickAction.RunCommand,
                    $"/quest info {quest.Id}"
                ))
                .SetHoverEvent(new HoverEvent(
                    HoverAction.ShowText,
                    $"Â§e{quest.Description}\n\n" +
                    $"Â§7å¥–åŠ±: Â§6{quest.Reward}\n" +
                    $"Â§7è¿›åº¦: Â§a{quest.Progress}Â§7/Â§a{quest.Required}\n\n" +
                    $"Â§8ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…"
                )))
            .Append(new TextComponent("\n"));
        
        questList.Append(questLine);
    }
    
    await _gameDisplay.SendTextComponentAsync(playerName, questList);
}
```

### **ç¤ºä¾‹4ï¼šèŠå¤©è¿‡æ»¤å™¨**

```csharp
public class ChatFormatterPlugin : IPlugin
{
    public void OnEnable(IPluginContext context)
    {
        context.EventBus.Subscribe<PlayerChatEvent>(async e =>
        {
            // å–æ¶ˆåŸå§‹æ¶ˆæ¯
            e.Cancel = true;
            
            // åˆ›å»ºæ ¼å¼åŒ–æ¶ˆæ¯
            var formatted = new TextComponent("[")
                .SetColor(TextColor.Gray)
                .Append(new TextComponent(GetPlayerRank(e.PlayerName))
                    .SetColor(GetRankColor(e.PlayerName))
                    .SetBold(true))
                .Append(new TextComponent("] ")
                    .SetColor(TextColor.Gray))
                .Append(new TextComponent(e.PlayerName)
                    .SetColor(TextColor.White)
                    .SetClickEvent(new ClickEvent(
                        ClickAction.SuggestCommand,
                        $"/msg {e.PlayerName} "
                    ))
                    .SetHoverEvent(new HoverEvent(
                        HoverAction.ShowText,
                        $"Â§7ç‚¹å‡»ç§èŠ Â§f{e.PlayerName}"
                    )))
                .Append(new TextComponent(": ")
                    .SetColor(TextColor.Gray))
                .Append(new TextComponent(e.Message)
                    .SetColor(TextColor.White));
            
            // å¹¿æ’­æ ¼å¼åŒ–æ¶ˆæ¯
            await context.GameDisplay.BroadcastTextComponentAsync(formatted);
        });
    }
}
```

### **ç¤ºä¾‹5ï¼šå…¬å‘Šç³»ç»Ÿ**

```csharp
public class AnnouncementCommand : ICommand
{
    public async Task<CommandResult> ExecuteAsync(ICommandSender sender, string[] args)
    {
        var message = string.Join(" ", args);
        
        var announcement = new TextComponent("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n")
            .SetColor(TextColor.Gold)
            .SetBold(true)
            .Append(new TextComponent("ğŸ“¢ ")
                .SetColor(TextColor.Yellow))
            .Append(new TextComponent("æœåŠ¡å™¨å…¬å‘Š")
                .SetColor(TextColor.Gold)
                .SetBold(true))
            .Append(new TextComponent("\n\n"))
            .Append(new TextComponent(message)
                .SetColor(TextColor.White))
            .Append(new TextComponent("\n\n"))
            .Append(new TextComponent("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
                .SetColor(TextColor.Gold)
                .SetBold(true));
        
        await _gameDisplay.BroadcastTextComponentAsync(announcement);
        
        // æ’­æ”¾æç¤ºéŸ³
        await _musicPlayer.PlayWarningSoundAsync("@a");
        
        return CommandResult.Ok("å…¬å‘Šå·²å‘å¸ƒ");
    }
}
```

---

## ğŸ’¡ **æœ€ä½³å®è·µ**

### **1. ä¿æŒå¯è¯»æ€§**

âœ… **æ¨èï¼š** ä½¿ç”¨é“¾å¼è°ƒç”¨å’Œç¼©è¿›
```csharp
var text = new TextComponent("æ ‡é¢˜")
    .SetColor(TextColor.Gold)
    .SetBold(true)
    .Append(new TextComponent("\n"))
    .Append(new TextComponent("å†…å®¹")
        .SetColor(TextColor.White));
```

### **2. å¤ç”¨ç»„ä»¶**

âœ… **æ¨èï¼š** åˆ›å»ºå¯å¤ç”¨çš„ç»„ä»¶
```csharp
private TextComponent CreateButton(string label, string command, string tooltip)
{
    return new TextComponent($"[{label}]")
        .SetColor(TextColor.Green)
        .SetClickEvent(new ClickEvent(ClickAction.RunCommand, command))
        .SetHoverEvent(new HoverEvent(HoverAction.ShowText, tooltip));
}

// ä½¿ç”¨
var menu = new TextComponent("èœå•: ")
    .Append(CreateButton("ä¼ é€", "/tp", "æ‰“å¼€ä¼ é€èœå•"))
    .Append(" ")
    .Append(CreateButton("å•†åº—", "/shop", "æ‰“å¼€å•†åº—"));
```

### **3. å›½é™…åŒ–æ”¯æŒ**

âœ… **æ¨èï¼š** ç»“åˆ i18n
```csharp
var text = new TextComponent(_i18n.Translate("menu.title"))
    .SetColor(TextColor.Gold)
    .Append(new TextComponent(_i18n.Translate("menu.subtitle"))
        .SetColor(TextColor.Gray));
```

### **4. é¢œè‰²ä¸€è‡´æ€§**

âœ… **æ¨èï¼š** å®šä¹‰é¢œè‰²å¸¸é‡
```csharp
private static class Colors
{
    public static readonly TextColor Title = TextColor.Gold;
    public static readonly TextColor Content = TextColor.White;
    public static readonly TextColor Button = TextColor.Green;
    public static readonly TextColor Warning = TextColor.Red;
}

var text = new TextComponent("æ ‡é¢˜").SetColor(Colors.Title);
```

---

## ğŸ“š **ç›¸å…³æ–‡æ¡£**

- [æ¸¸æˆæ˜¾ç¤ºAPI](./æ¸¸æˆæ˜¾ç¤ºAPI.md)
- [å›½é™…åŒ– (i18n)](./å›½é™…åŒ–.md)
- [å‘½ä»¤ç³»ç»Ÿ](../02-æ ¸å¿ƒåŠŸèƒ½/å‘½ä»¤ç³»ç»Ÿ.md)

---

**æ–‡æ¡£ç»´æŠ¤è€…ï¼š** NetherGate å¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°ï¼š** 2025-01-08  
**è®¸å¯è¯ï¼š** LGPL-3.0

