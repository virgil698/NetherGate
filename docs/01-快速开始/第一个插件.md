# ç¬¬ä¸€ä¸ªæ’ä»¶

æœ¬æ•™ç¨‹å°†æ‰‹æŠŠæ‰‹æ•™ä½ åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„ NetherGate æ’ä»¶ï¼Œä»é›¶å¼€å§‹åˆ°å‘å¸ƒã€‚æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª**ç­¾åˆ°æ’ä»¶**ï¼Œç©å®¶å¯ä»¥æ¯å¤©ç­¾åˆ°è·å¾—å¥–åŠ±ã€‚

---

## ğŸ“‹ **åŠŸèƒ½éœ€æ±‚**

æˆ‘ä»¬çš„ç­¾åˆ°æ’ä»¶å°†å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š

- âœ… ç©å®¶æ¯å¤©å¯ä»¥ç­¾åˆ°ä¸€æ¬¡
- âœ… ç­¾åˆ°è·å¾—éšæœºé‡‘å¸å¥–åŠ±
- âœ… è¿ç»­ç­¾åˆ°æœ‰é¢å¤–å¥–åŠ±
- âœ… æ˜¾ç¤ºç­¾åˆ°æ’è¡Œæ¦œ
- âœ… ç­¾åˆ°æé†’å’Œ BossBar æ˜¾ç¤º
- âœ… æ•°æ®æŒä¹…åŒ–

---

## ğŸš€ **ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºé¡¹ç›®**

### **1. åˆ›å»ºé¡¹ç›®ç›®å½•**

```bash
mkdir CheckinPlugin
cd CheckinPlugin
```

### **2. åˆå§‹åŒ–é¡¹ç›®**

```bash
dotnet new classlib -n CheckinPlugin
cd CheckinPlugin
```

### **3. æ·»åŠ  NetherGate.API å¼•ç”¨**

```bash
# å¦‚æœä»æºç å¼•ç”¨
dotnet add reference ../../NetherGate/src/NetherGate.API/NetherGate.API.csproj

# æˆ–ä» NuGet
dotnet add package NetherGate.API
```

### **4. é…ç½®é¡¹ç›®æ–‡ä»¶**

ç¼–è¾‘ `CheckinPlugin.csproj`ï¼š

```xml
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net9.0</TargetFramework>
    <EnableDynamicLoading>true</EnableDynamicLoading>
    <Nullable>enable</Nullable>
    <Version>1.0.0</Version>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="NetherGate.API" Version="1.0.0" PrivateAssets="all" />
  </ItemGroup>

  <ItemGroup>
    <None Update="plugin.json">
      <CopyToOutputDirectory>Always</CopyToOutputDirectory>
    </None>
    <None Update="config.example.yaml">
      <CopyToOutputDirectory>Always</CopyToOutputDirectory>
    </None>
  </ItemGroup>

  <!-- è‡ªåŠ¨å¤åˆ¶åˆ° NetherGate æ’ä»¶ç›®å½• -->
  <Target Name="CopyToPlugins" AfterTargets="Build">
    <ItemGroup>
      <PluginFiles Include="$(OutputPath)**\*.*" />
    </ItemGroup>
    <Copy 
      SourceFiles="@(PluginFiles)" 
      DestinationFolder="$(SolutionDir)..\NetherGate\bin\$(Configuration)\plugins\$(ProjectName)\%(RecursiveDir)" 
      SkipUnchangedFiles="true" />
  </Target>
</Project>
```

---

## ğŸ“ **ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæ•°æ®æ¨¡å‹**

### **1. åˆ›å»ºç›®å½•ç»“æ„**

```
CheckinPlugin/
â”œâ”€â”€ Models/           # æ•°æ®æ¨¡å‹
â”œâ”€â”€ Commands/         # å‘½ä»¤
â”œâ”€â”€ Events/           # äº‹ä»¶å¤„ç†
â”œâ”€â”€ Services/         # ä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ CheckinPlugin.cs  # ä¸»ç±»
â””â”€â”€ plugin.json       # å…ƒæ•°æ®
```

### **2. å®šä¹‰é…ç½®ç±»**

åˆ›å»º `Models/CheckinConfig.cs`ï¼š

```csharp
namespace CheckinPlugin.Models;

public class CheckinConfig
{
    /// <summary>
    /// æœ€å°é‡‘å¸å¥–åŠ±
    /// </summary>
    public int MinCoins { get; set; } = 10;

    /// <summary>
    /// æœ€å¤§é‡‘å¸å¥–åŠ±
    /// </summary>
    public int MaxCoins { get; set; } = 50;

    /// <summary>
    /// è¿ç»­ç­¾åˆ°å¥–åŠ±å€æ•°
    /// </summary>
    public double StreakMultiplier { get; set; } = 1.5;

    /// <summary>
    /// è¿ç»­ç­¾åˆ°è§¦å‘å¤©æ•°
    /// </summary>
    public int StreakDays { get; set; } = 3;

    /// <summary>
    /// æ˜¯å¦å¯ç”¨ç­¾åˆ°æé†’
    /// </summary>
    public bool EnableReminder { get; set; } = true;

    /// <summary>
    /// ç­¾åˆ°åæ˜¾ç¤º BossBar çš„æ—¶é•¿ï¼ˆç§’ï¼‰
    /// </summary>
    public int BossBarDurationSeconds { get; set; } = 5;
}
```

### **3. å®šä¹‰ç©å®¶æ•°æ®ç±»**

åˆ›å»º `Models/PlayerCheckinData.cs`ï¼š

```csharp
namespace CheckinPlugin.Models;

public class PlayerCheckinData
{
    /// <summary>
    /// ç©å®¶åç§°
    /// </summary>
    public string PlayerName { get; set; } = string.Empty;

    /// <summary>
    /// æœ€åç­¾åˆ°æ—¶é—´
    /// </summary>
    public DateTime? LastCheckinTime { get; set; }

    /// <summary>
    /// è¿ç»­ç­¾åˆ°å¤©æ•°
    /// </summary>
    public int StreakDays { get; set; }

    /// <summary>
    /// æ€»ç­¾åˆ°æ¬¡æ•°
    /// </summary>
    public int TotalCheckins { get; set; }

    /// <summary>
    /// ç´¯è®¡è·å¾—é‡‘å¸
    /// </summary>
    public int TotalCoinsEarned { get; set; }
}
```

---

## ğŸ”§ **ç¬¬ä¸‰æ­¥ï¼šå®ç°ä¸šåŠ¡é€»è¾‘**

### **åˆ›å»ºç­¾åˆ°æœåŠ¡**

åˆ›å»º `Services/CheckinService.cs`ï¼š

```csharp
using NetherGate.API.Plugins;
using CheckinPlugin.Models;

namespace CheckinPlugin.Services;

public class CheckinService
{
    private readonly IPluginContext _context;
    private readonly CheckinConfig _config;
    private readonly Dictionary<string, PlayerCheckinData> _playerData = new();
    private readonly Random _random = new();
    private readonly string _dataFile;

    public CheckinService(IPluginContext context, CheckinConfig config)
    {
        _context = context;
        _config = config;
        _dataFile = Path.Combine(_context.DataDirectory, "checkin_data.json");
        LoadData();
    }

    /// <summary>
    /// ç©å®¶ç­¾åˆ°
    /// </summary>
    public async Task<CheckinResult> CheckinAsync(string playerName)
    {
        var now = DateTime.UtcNow;
        var today = now.Date;

        // è·å–æˆ–åˆ›å»ºç©å®¶æ•°æ®
        if (!_playerData.TryGetValue(playerName, out var data))
        {
            data = new PlayerCheckinData { PlayerName = playerName };
            _playerData[playerName] = data;
        }

        // æ£€æŸ¥æ˜¯å¦å·²ç­¾åˆ°
        if (data.LastCheckinTime.HasValue && data.LastCheckinTime.Value.Date == today)
        {
            var nextCheckinTime = data.LastCheckinTime.Value.AddDays(1).Date;
            return new CheckinResult
            {
                Success = false,
                Message = $"Â§cä½ ä»Šå¤©å·²ç»ç­¾åˆ°è¿‡äº†ï¼\nÂ§7ä¸‹æ¬¡ç­¾åˆ°æ—¶é—´: {nextCheckinTime:yyyy-MM-dd}",
                CoinsEarned = 0
            };
        }

        // è®¡ç®—è¿ç»­ç­¾åˆ°
        bool isStreak = false;
        if (data.LastCheckinTime.HasValue)
        {
            var daysSinceLastCheckin = (today - data.LastCheckinTime.Value.Date).Days;
            if (daysSinceLastCheckin == 1)
            {
                // è¿ç»­ç­¾åˆ°
                data.StreakDays++;
                isStreak = data.StreakDays >= _config.StreakDays;
            }
            else if (daysSinceLastCheckin > 1)
            {
                // è¿ç»­ç­¾åˆ°ä¸­æ–­
                data.StreakDays = 1;
            }
        }
        else
        {
            data.StreakDays = 1;
        }

        // è®¡ç®—å¥–åŠ±
        int baseCoins = _random.Next(_config.MinCoins, _config.MaxCoins + 1);
        int coins = baseCoins;

        if (isStreak)
        {
            coins = (int)(baseCoins * _config.StreakMultiplier);
        }

        // æ›´æ–°æ•°æ®
        data.LastCheckinTime = now;
        data.TotalCheckins++;
        data.TotalCoinsEarned += coins;

        // ä¿å­˜æ•°æ®
        SaveData();

        // è¿”å›ç»“æœ
        return new CheckinResult
        {
            Success = true,
            Message = $"Â§aç­¾åˆ°æˆåŠŸï¼\n" +
                      $"Â§eè·å¾—é‡‘å¸: Â§6{coins}\n" +
                      $"Â§eè¿ç»­ç­¾åˆ°: Â§6{data.StreakDays} Â§eå¤©\n" +
                      (isStreak ? $"Â§6â˜… è¿ç»­ç­¾åˆ°å¥–åŠ± {_config.StreakMultiplier}x â˜…" : ""),
            CoinsEarned = coins,
            StreakDays = data.StreakDays,
            IsStreak = isStreak
        };
    }

    /// <summary>
    /// è·å–ç©å®¶ç­¾åˆ°æ•°æ®
    /// </summary>
    public PlayerCheckinData? GetPlayerData(string playerName)
    {
        _playerData.TryGetValue(playerName, out var data);
        return data;
    }

    /// <summary>
    /// è·å–æ’è¡Œæ¦œ
    /// </summary>
    public List<PlayerCheckinData> GetLeaderboard(int count = 10)
    {
        return _playerData.Values
            .OrderByDescending(d => d.TotalCheckins)
            .ThenByDescending(d => d.StreakDays)
            .Take(count)
            .ToList();
    }

    /// <summary>
    /// åŠ è½½æ•°æ®
    /// </summary>
    private void LoadData()
    {
        try
        {
            if (File.Exists(_dataFile))
            {
                var json = File.ReadAllText(_dataFile);
                var data = System.Text.Json.JsonSerializer.Deserialize<Dictionary<string, PlayerCheckinData>>(json);
                if (data != null)
                {
                    foreach (var kvp in data)
                    {
                        _playerData[kvp.Key] = kvp.Value;
                    }
                    _context.Logger.Info($"å·²åŠ è½½ {_playerData.Count} ä¸ªç©å®¶çš„ç­¾åˆ°æ•°æ®");
                }
            }
        }
        catch (Exception ex)
        {
            _context.Logger.Error($"åŠ è½½ç­¾åˆ°æ•°æ®å¤±è´¥: {ex.Message}");
        }
    }

    /// <summary>
    /// ä¿å­˜æ•°æ®
    /// </summary>
    private void SaveData()
    {
        try
        {
            var json = System.Text.Json.JsonSerializer.Serialize(_playerData, new System.Text.Json.JsonSerializerOptions
            {
                WriteIndented = true
            });
            File.WriteAllText(_dataFile, json);
        }
        catch (Exception ex)
        {
            _context.Logger.Error($"ä¿å­˜ç­¾åˆ°æ•°æ®å¤±è´¥: {ex.Message}");
        }
    }
}

public class CheckinResult
{
    public bool Success { get; set; }
    public string Message { get; set; } = string.Empty;
    public int CoinsEarned { get; set; }
    public int StreakDays { get; set; }
    public bool IsStreak { get; set; }
}
```

---

## ğŸ® **ç¬¬å››æ­¥ï¼šåˆ›å»ºå‘½ä»¤**

### **åˆ›å»ºç­¾åˆ°å‘½ä»¤**

åˆ›å»º `Commands/CheckinCommand.cs`ï¼š

```csharp
using NetherGate.API.Commands;
using NetherGate.API.Plugins;
using CheckinPlugin.Services;

namespace CheckinPlugin.Commands;

public class CheckinCommand : ICommand
{
    private readonly IPluginContext _context;
    private readonly CheckinService _service;

    public string Name => "checkin";
    public string Description => "æ¯æ—¥ç­¾åˆ°è·å¾—å¥–åŠ±";
    public string[] Aliases => new[] { "ç­¾åˆ°", "qd" };
    public string? Usage => "#checkin";

    public CheckinCommand(IPluginContext context, CheckinService service)
    {
        _context = context;
        _service = service;
    }

    public async Task<CommandResult> ExecuteAsync(string[] args, ICommandSender? sender = null)
    {
        if (sender == null)
        {
            return CommandResult.Fail("æ­¤å‘½ä»¤åªèƒ½åœ¨æ¸¸æˆå†…ä½¿ç”¨");
        }

        try
        {
            var result = await _service.CheckinAsync(sender.Name);

            if (result.Success)
            {
                // å‘é€æˆåŠŸæ¶ˆæ¯
                await _context.GameDisplayApi.SendChatMessage(sender.Name, result.Message);

                // æ˜¾ç¤º BossBar
                await _context.GameDisplayApi.ShowBossBar(
                    sender.Name,
                    "checkin_reward",
                    $"Â§aç­¾åˆ°æˆåŠŸï¼è·å¾— {result.CoinsEarned} é‡‘å¸",
                    BossBarColor.Green,
                    BossBarStyle.Progress,
                    progress: 1.0f
                );

                // 5ç§’åç§»é™¤ BossBar
                _ = Task.Run(async () =>
                {
                    await Task.Delay(5000);
                    await _context.GameDisplayApi.RemoveBossBar(sender.Name, "checkin_reward");
                });

                // è¿ç»­ç­¾åˆ°æ˜¾ç¤ºæ ‡é¢˜
                if (result.IsStreak)
                {
                    await _context.GameDisplayApi.ShowTitle(
                        sender.Name,
                        "Â§6Â§lè¿ç»­ç­¾åˆ°å¥–åŠ±ï¼",
                        $"Â§eå·²è¿ç»­ç­¾åˆ° {result.StreakDays} å¤©",
                        fadeIn: 10, stay: 60, fadeOut: 20
                    );
                }

                return CommandResult.Success();
            }
            else
            {
                await _context.GameDisplayApi.SendChatMessage(sender.Name, result.Message);
                return CommandResult.Fail();
            }
        }
        catch (Exception ex)
        {
            _context.Logger.Error($"ç­¾åˆ°å¤±è´¥: {ex.Message}");
            return CommandResult.Fail("Â§cç­¾åˆ°å¤±è´¥ï¼Œè¯·è”ç³»ç®¡ç†å‘˜");
        }
    }
}
```

### **åˆ›å»ºç­¾åˆ°ä¿¡æ¯å‘½ä»¤**

åˆ›å»º `Commands/CheckinInfoCommand.cs`ï¼š

```csharp
using NetherGate.API.Commands;
using NetherGate.API.Plugins;
using CheckinPlugin.Services;

namespace CheckinPlugin.Commands;

public class CheckinInfoCommand : ICommand
{
    private readonly IPluginContext _context;
    private readonly CheckinService _service;

    public string Name => "checkininfo";
    public string Description => "æŸ¥çœ‹ç­¾åˆ°ä¿¡æ¯";
    public string[] Aliases => new[] { "qdinfo" };
    public string? Usage => "#checkininfo [player]";

    public CheckinInfoCommand(IPluginContext context, CheckinService service)
    {
        _context = context;
        _service = service;
    }

    public async Task<CommandResult> ExecuteAsync(string[] args, ICommandSender? sender = null)
    {
        string targetPlayer = sender?.Name ?? "Console";
        
        if (args.Length > 0)
        {
            targetPlayer = args[0];
        }
        else if (sender == null)
        {
            return CommandResult.Fail("ç”¨æ³•: checkininfo <player>");
        }

        var data = _service.GetPlayerData(targetPlayer);

        if (data == null)
        {
            var message = $"Â§cç©å®¶ {targetPlayer} è¿˜æ²¡æœ‰ç­¾åˆ°è®°å½•";
            if (sender != null)
            {
                await _context.GameDisplayApi.SendChatMessage(sender.Name, message);
            }
            return CommandResult.Fail(message);
        }

        string info = $"Â§6=== {targetPlayer} çš„ç­¾åˆ°ä¿¡æ¯ ===\n" +
                      $"Â§eæ€»ç­¾åˆ°æ¬¡æ•°: Â§f{data.TotalCheckins}\n" +
                      $"Â§eè¿ç»­ç­¾åˆ°: Â§f{data.StreakDays} Â§eå¤©\n" +
                      $"Â§eç´¯è®¡é‡‘å¸: Â§f{data.TotalCoinsEarned}\n" +
                      $"Â§eæœ€åç­¾åˆ°: Â§f{data.LastCheckinTime?.ToString("yyyy-MM-dd HH:mm:ss") ?? "ä»æœª"}";

        if (sender != null)
        {
            await _context.GameDisplayApi.SendChatMessage(sender.Name, info);
        }

        return CommandResult.Success(info);
    }
}
```

### **åˆ›å»ºæ’è¡Œæ¦œå‘½ä»¤**

åˆ›å»º `Commands/CheckinTopCommand.cs`ï¼š

```csharp
using NetherGate.API.Commands;
using NetherGate.API.Plugins;
using CheckinPlugin.Services;

namespace CheckinPlugin.Commands;

public class CheckinTopCommand : ICommand
{
    private readonly IPluginContext _context;
    private readonly CheckinService _service;

    public string Name => "checkintop";
    public string Description => "æŸ¥çœ‹ç­¾åˆ°æ’è¡Œæ¦œ";
    public string[] Aliases => new[] { "qdtop" };

    public CheckinTopCommand(IPluginContext context, CheckinService service)
    {
        _context = context;
        _service = service;
    }

    public async Task<CommandResult> ExecuteAsync(string[] args, ICommandSender? sender = null)
    {
        var leaderboard = _service.GetLeaderboard(10);

        if (leaderboard.Count == 0)
        {
            return CommandResult.Fail("è¿˜æ²¡æœ‰ä»»ä½•ç©å®¶ç­¾åˆ°");
        }

        var message = "Â§6Â§l=== ç­¾åˆ°æ’è¡Œæ¦œ ===\n";
        for (int i = 0; i < leaderboard.Count; i++)
        {
            var data = leaderboard[i];
            string medal = i switch
            {
                0 => "Â§6ğŸ¥‡",
                1 => "Â§7ğŸ¥ˆ",
                2 => "Â§cğŸ¥‰",
                _ => $"Â§7#{i + 1}"
            };
            message += $"{medal} Â§f{data.PlayerName} Â§7- " +
                      $"Â§e{data.TotalCheckins}æ¬¡ Â§7(è¿ç»­{data.StreakDays}å¤©)\n";
        }

        if (sender != null)
        {
            await _context.GameDisplayApi.SendChatMessage(sender.Name, message);
        }

        return CommandResult.Success(message);
    }
}
```

---

## ğŸ­ **ç¬¬äº”æ­¥ï¼šå¤„ç†äº‹ä»¶**

### **åˆ›å»ºäº‹ä»¶å¤„ç†å™¨**

åˆ›å»º `Events/PlayerEventHandler.cs`ï¼š

```csharp
using NetherGate.API.Events;
using NetherGate.API.Plugins;
using CheckinPlugin.Services;
using CheckinPlugin.Models;

namespace CheckinPlugin.Events;

public class PlayerEventHandler
{
    private readonly IPluginContext _context;
    private readonly CheckinService _service;
    private readonly CheckinConfig _config;

    public PlayerEventHandler(IPluginContext context, CheckinService service, CheckinConfig config)
    {
        _context = context;
        _service = service;
        _config = config;
    }

    public void Register()
    {
        _context.EventBus.Subscribe<PlayerJoinedEvent>(OnPlayerJoined);
    }

    private async void OnPlayerJoined(PlayerJoinedEvent e)
    {
        if (!_config.EnableReminder)
            return;

        // å»¶è¿Ÿ3ç§’åæé†’
        await Task.Delay(3000);

        var data = _service.GetPlayerData(e.Player.Name);
        var today = DateTime.UtcNow.Date;

        // å¦‚æœä»Šå¤©è¿˜æ²¡ç­¾åˆ°ï¼Œå‘é€æé†’
        if (data == null || !data.LastCheckinTime.HasValue || data.LastCheckinTime.Value.Date < today)
        {
            await _context.GameDisplayApi.SendChatMessage(
                e.Player.Name,
                "Â§e[ç­¾åˆ°] Â§fåˆ«å¿˜äº†ä»Šå¤©ç­¾åˆ°å“¦ï¼è¾“å…¥ Â§a#checkin Â§fç­¾åˆ°è·å¾—å¥–åŠ±"
            );

            await _context.GameDisplayApi.ShowActionBar(
                e.Player.Name,
                "Â§6ç‚¹å‡»èŠå¤©æ¡†è¾“å…¥ #checkin ç­¾åˆ°"
            );
        }
        else
        {
            // å·²ç­¾åˆ°ï¼Œæ˜¾ç¤ºä¿¡æ¯
            await _context.GameDisplayApi.ShowActionBar(
                e.Player.Name,
                $"Â§aä»Šæ—¥å·²ç­¾åˆ° Â§7| Â§eè¿ç»­ {data.StreakDays} å¤©"
            );
        }
    }
}
```

---

## ğŸ—ï¸ **ç¬¬å…­æ­¥ï¼šç»„è£…æ’ä»¶**

### **åˆ›å»ºä¸»ç±»**

åˆ›å»º `CheckinPlugin.cs`ï¼š

```csharp
using NetherGate.API.Plugins;
using CheckinPlugin.Models;
using CheckinPlugin.Services;
using CheckinPlugin.Commands;
using CheckinPlugin.Events;

namespace CheckinPlugin;

public class CheckinPlugin : IPlugin
{
    private IPluginContext _context = null!;
    private CheckinConfig _config = null!;
    private CheckinService _service = null!;
    private PlayerEventHandler _eventHandler = null!;

    public void OnLoad()
    {
        Console.WriteLine("[CheckinPlugin] Loading...");
    }

    public async void OnEnable(IPluginContext context)
    {
        _context = context;
        _context.Logger.Info("CheckinPlugin is enabling...");

        try
        {
            // 1. åŠ è½½é…ç½®
            _config = await _context.ConfigManager.LoadConfigAsync<CheckinConfig>("config");
            _context.Logger.Info("é…ç½®å·²åŠ è½½");

            // 2. åˆå§‹åŒ–æœåŠ¡
            _service = new CheckinService(_context, _config);
            _context.Logger.Info("ç­¾åˆ°æœåŠ¡å·²åˆå§‹åŒ–");

            // 3. æ³¨å†Œå‘½ä»¤
            _context.CommandManager.RegisterCommand(new CheckinCommand(_context, _service));
            _context.CommandManager.RegisterCommand(new CheckinInfoCommand(_context, _service));
            _context.CommandManager.RegisterCommand(new CheckinTopCommand(_context, _service));
            _context.Logger.Info("å‘½ä»¤å·²æ³¨å†Œ");

            // 4. æ³¨å†Œäº‹ä»¶
            _eventHandler = new PlayerEventHandler(_context, _service, _config);
            _eventHandler.Register();
            _context.Logger.Info("äº‹ä»¶å·²æ³¨å†Œ");

            _context.Logger.Info("Â§aCheckinPlugin å¯ç”¨æˆåŠŸï¼");
        }
        catch (Exception ex)
        {
            _context.Logger.Error($"å¯ç”¨æ’ä»¶å¤±è´¥: {ex.Message}");
            throw;
        }
    }

    public void OnDisable()
    {
        _context.Logger.Info("CheckinPlugin is disabling...");
        
        // æ¡†æ¶ä¼šè‡ªåŠ¨æ¸…ç†å‘½ä»¤å’Œäº‹ä»¶è®¢é˜…
        
        _context.Logger.Info("CheckinPlugin å·²ç¦ç”¨");
    }
}
```

---

## ğŸ“‹ **ç¬¬ä¸ƒæ­¥ï¼šåˆ›å»ºå…ƒæ•°æ®**

### **åˆ›å»º plugin.json**

```json
{
  "name": "CheckinPlugin",
  "version": "1.0.0",
  "author": "Your Name",
  "description": "æ¯æ—¥ç­¾åˆ°æ’ä»¶ï¼Œç©å®¶å¯ä»¥ç­¾åˆ°è·å¾—å¥–åŠ±",
  "entry_point": "CheckinPlugin.CheckinPlugin",
  "website": "https://github.com/yourname/CheckinPlugin",
  "category": "gameplay",
  "tags": ["checkin", "reward", "economy"],
  
  "nethergate_api_version": "^1.0.0",
  "minecraft_version": "1.21.x",
  
  "permissions": {
    "checkin.use": {
      "description": "å…è®¸ä½¿ç”¨ç­¾åˆ°åŠŸèƒ½",
      "default": true
    },
    "checkin.admin": {
      "description": "ç®¡ç†å‘˜æƒé™",
      "default": false
    }
  }
}
```

### **åˆ›å»ºç¤ºä¾‹é…ç½®**

åˆ›å»º `config.example.yaml`ï¼š

```yaml
# CheckinPlugin é…ç½®æ–‡ä»¶

# æœ€å°é‡‘å¸å¥–åŠ±
min_coins: 10

# æœ€å¤§é‡‘å¸å¥–åŠ±
max_coins: 50

# è¿ç»­ç­¾åˆ°å¥–åŠ±å€æ•°
streak_multiplier: 1.5

# è¿ç»­ç­¾åˆ°è§¦å‘å¤©æ•°
streak_days: 3

# æ˜¯å¦å¯ç”¨ç­¾åˆ°æé†’
enable_reminder: true

# ç­¾åˆ°åæ˜¾ç¤º BossBar çš„æ—¶é•¿ï¼ˆç§’ï¼‰
boss_bar_duration_seconds: 5
```

---

## ğŸ”¨ **ç¬¬å…«æ­¥ï¼šæ„å»ºå’Œæµ‹è¯•**

### **1. æ„å»ºæ’ä»¶**

```bash
dotnet build
```

### **2. æŸ¥çœ‹è¾“å‡º**

```
bin/Debug/net9.0/
â”œâ”€â”€ CheckinPlugin.dll
â”œâ”€â”€ CheckinPlugin.pdb
â”œâ”€â”€ plugin.json
â””â”€â”€ config.example.yaml
```

### **3. è¿è¡Œ NetherGate**

```bash
cd ../NetherGate/bin/Debug
dotnet NetherGate.Host.dll
```

### **4. æµ‹è¯•å‘½ä»¤**

åœ¨ Minecraft æ¸¸æˆå†…ï¼š

```
#checkin         # ç­¾åˆ°
#checkininfo     # æŸ¥çœ‹è‡ªå·±çš„ç­¾åˆ°ä¿¡æ¯
#checkininfo Steve  # æŸ¥çœ‹å…¶ä»–ç©å®¶çš„ä¿¡æ¯
#checkintop       # æŸ¥çœ‹æ’è¡Œæ¦œ
```

---

## ğŸ“¦ **ç¬¬ä¹æ­¥ï¼šå‘å¸ƒæ’ä»¶**

### **1. å‡†å¤‡å‘å¸ƒ**

```bash
# æ„å»º Release ç‰ˆæœ¬
dotnet build --configuration Release

# è¾“å‡ºä½ç½®
bin/Release/net9.0/
```

### **2. æ‰“åŒ…æ’ä»¶**

åˆ›å»ºå‘å¸ƒåŒ…ï¼š

```
CheckinPlugin-v1.0.0.zip
â”œâ”€â”€ CheckinPlugin/
â”‚   â”œâ”€â”€ CheckinPlugin.dll
â”‚   â”œâ”€â”€ plugin.json
â”‚   â””â”€â”€ config.example.yaml
â””â”€â”€ README.md
```

### **3. åˆ›å»º README.md**

```markdown
# CheckinPlugin

æ¯æ—¥ç­¾åˆ°æ’ä»¶ï¼Œç©å®¶å¯ä»¥ç­¾åˆ°è·å¾—é‡‘å¸å¥–åŠ±ã€‚

## åŠŸèƒ½

- âœ… æ¯æ—¥ç­¾åˆ°è·å¾—éšæœºé‡‘å¸
- âœ… è¿ç»­ç­¾åˆ°é¢å¤–å¥–åŠ±
- âœ… ç­¾åˆ°æ’è¡Œæ¦œ
- âœ… ç­¾åˆ°æé†’

## å®‰è£…

1. ä¸‹è½½ `CheckinPlugin-v1.0.0.zip`
2. è§£å‹åˆ° `plugins/` ç›®å½•
3. é‡å¯æœåŠ¡å™¨æˆ–ä½¿ç”¨ `plugin load CheckinPlugin`

## å‘½ä»¤

- `#checkin` - ç­¾åˆ°
- `#checkininfo [player]` - æŸ¥çœ‹ç­¾åˆ°ä¿¡æ¯
- `#checkintop` - æŸ¥çœ‹æ’è¡Œæ¦œ

## é…ç½®

é…ç½®æ–‡ä»¶ï¼š`config/CheckinPlugin/config.yaml`

è¯¦è§ `config.example.yaml`

## è®¸å¯

MIT License
```

---

## ğŸ‰ **å®Œæˆï¼**

æ­å–œï¼ä½ å·²ç»åˆ›å»ºäº†ä¸€ä¸ªå®Œæ•´çš„ NetherGate æ’ä»¶ï¼

### **å­¦åˆ°çš„å†…å®¹ï¼š**

âœ… åˆ›å»ºæ’ä»¶é¡¹ç›®å’Œé…ç½®  
âœ… å®šä¹‰æ•°æ®æ¨¡å‹å’Œé…ç½®  
âœ… å®ç°ä¸šåŠ¡é€»è¾‘ï¼ˆç­¾åˆ°æœåŠ¡ï¼‰  
âœ… åˆ›å»ºå‘½ä»¤ï¼ˆç­¾åˆ°ã€æŸ¥è¯¢ã€æ’è¡Œæ¦œï¼‰  
âœ… å¤„ç†äº‹ä»¶ï¼ˆç©å®¶åŠ å…¥æé†’ï¼‰  
âœ… ä½¿ç”¨æ¸¸æˆæ˜¾ç¤º APIï¼ˆBossBarã€æ ‡é¢˜ã€èŠå¤©ï¼‰  
âœ… æ•°æ®æŒä¹…åŒ–ï¼ˆJSON å­˜å‚¨ï¼‰  
âœ… æ„å»ºå’Œå‘å¸ƒæ’ä»¶  

### **ä¸‹ä¸€æ­¥ï¼š**

- ğŸ“š å­¦ä¹ æ›´å¤šé«˜çº§åŠŸèƒ½ï¼š[æ’ä»¶çƒ­é‡è½½](../../04-é«˜çº§åŠŸèƒ½/æ’ä»¶çƒ­é‡è½½.md)
- ğŸ”§ ä¼˜åŒ–æ’ä»¶æ€§èƒ½ï¼š[æ€§èƒ½ä¼˜åŒ–](../../07-ç¤ºä¾‹å’Œæœ€ä½³å®è·µ/æ€§èƒ½ä¼˜åŒ–.md)
- ğŸ¨ æŸ¥çœ‹æ›´å¤šç¤ºä¾‹ï¼š[ç¤ºä¾‹æ’ä»¶é›†](../../07-ç¤ºä¾‹å’Œæœ€ä½³å®è·µ/ç¤ºä¾‹æ’ä»¶é›†.md)

---

**æ–‡æ¡£ç»´æŠ¤è€…ï¼š** NetherGate å¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°ï¼š** 2025-10-05